<!DOCTYPE html>
<html class='no-js'>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Slow data and Fast Sites | Blank Page Tech</title>
    <meta name="site" content="Blank Page Tech" />
    <meta name="og:site_name" content="Blank Page Tech" />
    <meta name="title" content="Slow data and Fast Sites" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Slow data and Fast Sites" />
    <meta name="twitter:site" content="@wschenk" />
    <meta name="og:title" content="Slow data and Fast Sites" />
    <meta content='width=device-width' name='viewport'>
    <link href="../stylesheets/application-25f4f7e0.css" rel="stylesheet" type="text/css" /><link href="../stylesheets/webicons-da5ecace.css" rel="stylesheet" type="text/css" /><link href="../stylesheets/socicons-d8ab83dd.css" rel="stylesheet" type="text/css" /><link href="../stylesheets/animate-8335fea6.css" rel="stylesheet" type="text/css" /><link href="../stylesheets/googlecode-d3629bf4.css" rel="stylesheet" type="text/css" />
    <link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/default.min.css' rel='stylesheet'>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
  </head>
  <body data-spy='scroll' data-target='.sidebar'>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
      <div class='visible-xs-block'>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapsable">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">
        Blank Page Tech
      </a>
        
      </div>
    </div>
    <div class='hidden-xs'>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapsable">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">
        Technology for the blank page
      </a>
        
      </div>
    </div>
    <div class="collapse navbar-collapse" id="navbar-collapsable">
      <ul class="nav navbar-nav navbar-right foo" id="menu">
      <li>
      <a href="/articles/">
        Articles
      </a>
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Topics <b class="caret"></b></a>
      <ul class="dropdown-menu">
        <li>
      <a href="/tags/howto/">
        Howtos
      </a>
    </li>
    <li>
      <a href="/tags/overview/">
        Overviews
      </a>
    </li>
    <li>
      <a href="/tags/product/">
        Product
      </a>
    </li>
    <li>
      <a href="/tags/tools/">
        Tools
      </a>
    </li>
    <li>
      <a href="/tags/socialinvestigator/">
        Social Investigator
      </a>
    </li>
    <li>
      <a href="/tags/ruby/">
        Ruby & Rails
      </a>
    </li>
    
      </ul>
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tags <b class="caret"></b></a>
      <ul class="dropdown-menu">
        <li>
      <a href="/bootstrap-advanced-grid-tricks/">
        bootstrap (1)
      </a>
    </li>
    <li>
      <a href="/tags/bots/">
        bots (2)
      </a>
    </li>
    <li>
      <a href="/using-rake-for-dataflow-programming-and-data-science/">
        data (1)
      </a>
    </li>
    <li>
      <a href="/osx-script-for-kiosk-mode/">
        gaze (1)
      </a>
    </li>
    <li>
      <a href="/pulling-data-out-of-google-analytics/">
        googleanalytics (1)
      </a>
    </li>
    <li>
      <a href="/tags/happy_seed/">
        happy_seed (3)
      </a>
    </li>
    <li>
      <a href="/tags/howto/">
        howto (15)
      </a>
    </li>
    <li>
      <a href="/bower-with-rails/">
        javascript (1)
      </a>
    </li>
    <li>
      <a href="/tags/middleman/">
        middleman (5)
      </a>
    </li>
    <li>
      <a href="/setting-up-devise-with-twitter-and-facebook-and-other-omniauth-schemes-without-email-addresses/">
        oauth (1)
      </a>
    </li>
    <li>
      <a href="/tags/osx/">
        osx (2)
      </a>
    </li>
    <li>
      <a href="/tags/overview/">
        overview (4)
      </a>
    </li>
    <li>
      <a href="/tags/product/">
        product (2)
      </a>
    </li>
    <li>
      <a href="/tags/rails/">
        rails (4)
      </a>
    </li>
    <li>
      <a href="/using-rake-for-dataflow-programming-and-data-science/">
        rake (1)
      </a>
    </li>
    <li>
      <a href="/how-to-track-your-coworkers/">
        redis (1)
      </a>
    </li>
    <li>
      <a href="/tags/ruby/">
        ruby (15)
      </a>
    </li>
    <li>
      <a href="/tags/socialinvestigator/">
        socialinvestigator (4)
      </a>
    </li>
    <li>
      <a href="/dateslice-writing-rails-extensions/">
        sql (1)
      </a>
    </li>
    <li>
      <a href="/field-of-dreams-is-25-years-old-and-hasn-t-aged-well/">
        startupmyths (1)
      </a>
    </li>
    <li class="active">
      <a href="/slow-data-and-fast-sites/">
        static_sites (1)
      </a>
    </li>
    <li>
      <a href="/setting-up-testing/">
        testing (1)
      </a>
    </li>
    <li>
      <a href="/making-a-command-line-utility-with-gems-and-thor/">
        thor (1)
      </a>
    </li>
    <li>
      <a href="/tags/tools/">
        tools (5)
      </a>
    </li>
    <li>
      <a href="/tags/toys/">
        toys (3)
      </a>
    </li>
    
      </ul>
    </li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Archives <b class="caret"></b></a>
      <ul class="dropdown-menu">
        <li>
      <a href="/bower-with-rails/">
        Jul 2015 (1)
      </a>
    </li>
    <li>
      <a href="/adding-search-to-a-middleman-blog/">
        Jun 2015 (1)
      </a>
    </li>
    <li>
      <a href="/2015/05/">
        May 2015 (2)
      </a>
    </li>
    <li>
      <a href="/why-engineers-build-crappy-products/">
        Feb 2015 (1)
      </a>
    </li>
    <li>
      <a href="/2015/01/">
        Jan 2015 (2)
      </a>
    </li>
    <li>
      <a href="/2014/12/">
        Dec 2014 (5)
      </a>
    </li>
    <li>
      <a href="/2014/11/">
        Nov 2014 (10)
      </a>
    </li>
    <li>
      <a href="/how-to-track-your-coworkers/">
        Oct 2014 (1)
      </a>
    </li>
    
      </ul>
    </li>
    
    </ul>
    <form class='navbar-form navbar-right' id='search' role='search'>
      <div class='form-group dropdown'>
        <div class='input-group'>
          <input autocomplete='off' class='form-control' id='search_box' placeholder='Search' type='text'>
          <span class='input-group-btn'>
            <button class='btn btn-default'>
              <span class='glyphicon glyphicon-search'></span>
            </button>
          </span>
        </div>
        <ul class='dropdown-menu dropdown-menu-left results'>
          <a href="/url">Title</a>
        </ul>
      </div>
    </form>
    
    </div>
    
    </div>
    </nav>
    <div class='article-header  '>
      <h1>Slow data and Fast Sites</h1>
      <h2>building fast, searchable, functional sites that fail gracefully</h2>
      <div class='tags'>
        <div class='tag'><a class="btn btn-primary" href="/tags/howto/">howto</a></div>
        <div class='tag'><a class="btn btn-primary" href="/tags/middleman/">middleman</a></div>
        <div class='tag'><a class="btn btn-primary" href="/tags/overview/">overview</a></div>
        <div class='tag'><a class="btn btn-primary" href="/tags/ruby/">ruby</a></div>
        <div class='tag'><a class="btn btn-primary" href="/tags/static_sites/">static_sites</a></div>
      </div>
      <a href='#comment_shower' id='comment_shower_scroll'>
        <span class='disqus-comment-count' data-disqus-identifier='2015-05-08-slow-data-and-fast-sites.html'></span>
      </a>
    </div>
    <div class='content'>
      <div class='row'>
        <div class='sidebar'>
          <ul class='nav toc' data-offset-top='400' data-spy='affix'>
            <li><a href="#top">Slow data and Fast Sites</a></li>
            <li><a href="#motivation">Motivation</a></li>
            <li><a href="#the-outline">The Outline</a></li>
            <li><a href="#data-changes-at-different-rates">Data changes at different rates</a></li>
            <li><a href="#towards-a-more-nerdy-taxonomy-of-data">Towards a more nerdy taxonomy of data</a></li>
            <li><a href="#what-do-we-need-to-assemble-a-website">What do we need to assemble a website</a></li>
            <li><a href="#how-urls-are-made-on-the-inside">How urls are made on the inside</a></li>
            <li><a href="#sitemaps-in-static-site-generators">Sitemaps in static site generators</a></li>
            <li><a href="#making-front-end-development-easy">Making front-end development easy</a></li>
            <li><a href="#enter-react">Enter React</a></li>
            <li><a href="#rendering-react-on-the-server-side">Rendering React on the server side</a></li>
            <li><a href="#javascript-and-web-services-sitting-in-a-tree">Javascript and web services sitting in a tree</a></li>
            <li><a href="#enter-parse">Enter Parse</a></li>
            <li><a href="#bringing-back-a-build-server">Bringing back a build server</a></li>
            <li><a href="#advantages">Advantages</a></li>
          </ul>
        </div>
        <div class='article' id='top'>
          <p>This article walks through the motivations driving and benefits of using a the Seed Architecture for building performant websites using Middleman, React, and a seperate API server such as Parse.  The benefits are:</p>
          
          <ol>
          <li>You get full SEO with a heavy client JavaScript site without having to do crazy things with PhantomJS or meta fragments.</li>
          <li>Hosting and operations become both cheap and doesn&#39;t require a support team.</li>
          <li>Scaling out the system is mainly a bandwidth problem, and secondarily a API scaling problem for a subset of behavior.</li>
          <li>The system breaks gracefully. If you overwhelm the API server the site is still available for browsing.  Assuming that most usage of the sites are reads, this means that if you try to <em>break the internet</em> with <a href="http://www.papermag.com/2014/11/kim_kardashian.php">Kim Kardashian&#39;s ass</a> maybe user login will slow down, but everything else is still available.</li>
          <li>You are able to build your front end using modern and clean fancy JavaScript technologies and don&#39;t need to mess around with back-end coding.</li>
          </ol>
          
          <h2 id="motivation">Motivation</h2>
          
          <p>Sometimes I feel bad for what we make servers do.  I will occasionally get a cringing feeling because we&#39;re just not being very nice to the fancy machines around us.  It&#39;s similar to being in the car with someone who is learning how to drive a standard transmission and they grind the gears lurching the car into a stall.  Ahhh!</p>
          
          <p>I especially get this feeling when trying to make poorly built websites scale, e.g.  wordpress sites that jam up the server when the slightest breeze of traffic wafts in, or Rails sites that are slamming the database with N+1 unindexed queries of largely static data.  I really enjoyed the <a href="https://medium.com/message/how-paper-magazines-web-engineers-scaled-kim-kardashians-back-end-sfw-6367f8d37688">backstory to the back-end</a>, but surely there has to be a better way to do this.</p>
          
          <p>The reality is the computer is mostly doing the same exact thing, over and over again.  For a lot of sites, there are only a few parts of the page that change based upon who is looking or when they are looking at it, and the bulk of what everyone seems is the same same same.  The computer doesn&#39;t complain about it but silently and stoically gets crushed under the load.  But we can fix it.  If we can break down the data on the page into different categories based upon its rate of change the bulk of the processing can happen at &quot;compile&quot; or &quot;build&quot; time, while only a small part of it needs to happen at run-time.  And when a wave of people come in the servers are fully prepared to serve them up what they need.</p>
          
          <p>There is so much computer power available both in desktop browsers and mobile browsers, and we should use it.  If we can find a way to precompute the repetitive stuff and push the computing of the dynamic stuff out to the edges, we vastly lower the load on the servers which simplifies operations and scaling.  There are some challenges with doing this; how to deal with SEO, increasing the &quot;build&quot; frequency to handle the &quot;slow data&quot; updates, and how to make it easy to do front-end development.  We&#39;ll go through a strategy below to address those challenges.</p>
          
          <p>At the end of this meandering article we are going to have a way to build super scalable sites that give you SEO and full client side interactivity without having any servers (or at least only a small cheap one) which will nevertheless be able to scale to huge amounts of traffic cheaply.</p>
          
          <h2 id="the-outline">The Outline</h2>
          
          <p>Let&#39;s take a step back from how we normally build websites, and see what we can we do better based upon the challenges and current reality of operating sites:</p>
          
          <ol>
          <li><p>The first insight is that once your site is built and running, things change at a different rate than they do in development.  The difference between tooling and run-time evaluation becomes more pronounced, and usage patterns of the data become clearly statified.  Even though we dump everything into the database, there are distinct classes of data that have different change patterns.</p></li>
          <li><p>The second insight is websites are about sitemaps, not about URLs.  SEO thinks in terms of Sitemaps, and webapps thinks in terms of Routes, but if we could get the best of both worlds if we had a static build process that can pull data from a datastore and understands the concepts of a Sitemap and a Router.</p></li>
          <li><p>The third insight is that we need a templating language that can run equally well on the server and the client in order to keep developers sane and effective.  The bulk of the application needs to be written using the same tooling.</p></li>
          <li><p>The fourth insight is that web services don&#39;t need to be hidden behind the server, and with rich client apps we can consume them directly from the client.</p></li>
          </ol>
          
          <p>I&#39;ll walk through these in turn, deconstructing what they mean, and outline a way of building a prerendered website that will let you add all the fancy front-end features and full SEO support - all of the benefits of so-called database backed web-sites with content management systems and complex logic - that will be able to scale up quickly without any ops support, and be able to degrade gracefully under spikes.</p>
          
          <h2 id="data-changes-at-different-rates">Data changes at different rates</h2>
          
          <p>Lets take 4 classes of sites that we all build regularly:</p>
          
          <ul>
          <li><strong>Marketing Sites</strong>, which after they launch rarely change, but may have a form that&#39;s the beginning of a sales or conversion funnel.  <em>e.g. Mobile App landing pages, like <a href="http://getpyne.com">getpyne.com</a></em></li>
          <li><strong>Publishing Sites</strong>, which change when new content is created, comments get posted, or with changes in a list of most emailed or most read articles.  Blogs, magazines and newspapers fit in here, though they have different user types and publishing schedules. <em>e.g. Newspapers, like <a href="http://nytimes.com">nytimes.com</a></em></li>
          <li><strong>Ecommerce Sites</strong>, which change when the product catalog gets updated, orders are placed, inventory changes, cross and up sells are calculated, and people add things to their cart. <em>e.g. <a href="http://teepublic.com">teepublic.com</a></em></li>
          <li><strong>Social Sites</strong>, which you only can access as a user, who your connections are, what gets added by other users, how you interact with that content, and any real time messaging between them. <em>e.g. <a href="http://instagram.com">instagram.com</a></em></li>
          </ul>
          
          <p><em>If the word social bothers you, just replace it with &quot;all views are customized to the user and you need to log in to see anything&quot;.</em></p>
          
          <p>Let&#39;s look at the rate of change of the different types of data on these sites:</p>
          
          <p><svg width="538pt" height="476pt" viewBox="0.00 0.00 537.54 476.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 472)"><title>Dataflow</title><polygon fill="white" stroke="none" points="-4,4 -4,-472 533.538,-472 533.538,4 -4,4"/>&lt;!-- Header --&gt;<g id="node1" class="node"><title>Header</title><text text-anchor="middle" x="65.5415" y="-445.8" font-family="Times,serif" font-size="14.00">Timeline</text></g>&lt;!-- Release --&gt;<g id="node2" class="node"><title>Release</title><text text-anchor="middle" x="65.5415" y="-373.8" font-family="Times,serif" font-size="14.00">Release</text></g>&lt;!-- Header&#45;&gt;Release --&gt;&lt;!-- Slow Data --&gt;<g id="node3" class="node"><title>Slow Data</title><text text-anchor="middle" x="65.5415" y="-301.8" font-family="Times,serif" font-size="14.00">Slow Data</text></g>&lt;!-- Release&#45;&gt;Slow Data --&gt;<g id="edge1" class="edge"><title>Release&#45;&gt;Slow Data</title><path fill="none" stroke="black" d="M65.5415,-359.697C65.5415,-351.983 65.5415,-342.712 65.5415,-334.112"/><polygon fill="black" stroke="black" points="69.0416,-334.104 65.5415,-324.104 62.0416,-334.104 69.0416,-334.104"/></g>&lt;!-- Medium Speed Data --&gt;<g id="node4" class="node"><title>Medium Speed Data</title><text text-anchor="middle" x="65.5415" y="-229.8" font-family="Times,serif" font-size="14.00">Medium Speed Data</text></g>&lt;!-- Slow Data&#45;&gt;Medium Speed Data --&gt;<g id="edge2" class="edge"><title>Slow Data&#45;&gt;Medium Speed Data</title><path fill="none" stroke="black" d="M65.5415,-287.697C65.5415,-279.983 65.5415,-270.712 65.5415,-262.112"/><polygon fill="black" stroke="black" points="69.0416,-262.104 65.5415,-252.104 62.0416,-262.104 69.0416,-262.104"/></g>&lt;!-- Fast Data --&gt;<g id="node5" class="node"><title>Fast Data</title><text text-anchor="middle" x="65.5415" y="-157.8" font-family="Times,serif" font-size="14.00">Fast Data</text></g>&lt;!-- Medium Speed Data&#45;&gt;Fast Data --&gt;<g id="edge3" class="edge"><title>Medium Speed Data&#45;&gt;Fast Data</title><path fill="none" stroke="black" d="M65.5415,-215.697C65.5415,-207.983 65.5415,-198.712 65.5415,-190.112"/><polygon fill="black" stroke="black" points="69.0416,-190.104 65.5415,-180.104 62.0416,-190.104 69.0416,-190.104"/></g>&lt;!-- Ephemera --&gt;<g id="node6" class="node"><title>Ephemera</title><text text-anchor="middle" x="65.5415" y="-85.8" font-family="Times,serif" font-size="14.00">Ephemera</text></g>&lt;!-- Fast Data&#45;&gt;Ephemera --&gt;<g id="edge4" class="edge"><title>Fast Data&#45;&gt;Ephemera</title><path fill="none" stroke="black" d="M65.5415,-143.697C65.5415,-135.983 65.5415,-126.712 65.5415,-118.112"/><polygon fill="black" stroke="black" points="69.0416,-118.104 65.5415,-108.104 62.0416,-118.104 69.0416,-118.104"/></g>&lt;!-- Session Data --&gt;<g id="node7" class="node"><title>Session Data</title><text text-anchor="middle" x="65.5415" y="-13.8" font-family="Times,serif" font-size="14.00">Session Data</text></g>&lt;!-- Ephemera&#45;&gt;Session Data --&gt;<g id="edge5" class="edge"><title>Ephemera&#45;&gt;Session Data</title><path fill="none" stroke="black" d="M65.5415,-71.6966C65.5415,-63.9827 65.5415,-54.7125 65.5415,-46.1124"/><polygon fill="black" stroke="black" points="69.0416,-46.1043 65.5415,-36.1043 62.0416,-46.1044 69.0416,-46.1043"/></g>&lt;!-- MHeader --&gt;<g id="node8" class="node"><title>MHeader</title><text text-anchor="middle" x="159.542" y="-445.8" font-family="Times,serif" font-size="14.00">Marketing</text></g>&lt;!-- MData --&gt;<g id="node12" class="node"><title>MData</title><polygon fill="lightgrey" stroke="black" points="201.022,-396 118.061,-396 118.061,-360 201.022,-360 201.022,-396"/><text text-anchor="middle" x="159.542" y="-373.8" font-family="Times,serif" font-size="14.00">Data Model</text></g>&lt;!-- MHeader&#45;&gt;MData --&gt;&lt;!-- PHeader --&gt;<g id="node9" class="node"><title>PHeader</title><text text-anchor="middle" x="259.542" y="-445.8" font-family="Times,serif" font-size="14.00">Publishing</text></g>&lt;!-- PData --&gt;<g id="node13" class="node"><title>PData</title><polygon fill="lightgrey" stroke="black" points="301.022,-396 218.061,-396 218.061,-360 301.022,-360 301.022,-396"/><text text-anchor="middle" x="259.542" y="-373.8" font-family="Times,serif" font-size="14.00">Data Model</text></g>&lt;!-- PHeader&#45;&gt;PData --&gt;&lt;!-- EHeader --&gt;<g id="node10" class="node"><title>EHeader</title><text text-anchor="middle" x="375.542" y="-445.8" font-family="Times,serif" font-size="14.00">Commerce</text></g>&lt;!-- EData --&gt;<g id="node14" class="node"><title>EData</title><polygon fill="lightgrey" stroke="black" points="417.022,-396 334.061,-396 334.061,-360 417.022,-360 417.022,-396"/><text text-anchor="middle" x="375.542" y="-373.8" font-family="Times,serif" font-size="14.00">Data Model</text></g>&lt;!-- EHeader&#45;&gt;EData --&gt;&lt;!-- SHeader --&gt;<g id="node11" class="node"><title>SHeader</title><text text-anchor="middle" x="486.542" y="-445.8" font-family="Times,serif" font-size="14.00">Social</text></g>&lt;!-- SData --&gt;<g id="node15" class="node"><title>SData</title><polygon fill="lightgrey" stroke="black" points="528.022,-396 445.061,-396 445.061,-360 528.022,-360 528.022,-396"/><text text-anchor="middle" x="486.542" y="-373.8" font-family="Times,serif" font-size="14.00">Data Model</text></g>&lt;!-- SHeader&#45;&gt;SData --&gt;&lt;!-- MPages --&gt;<g id="node16" class="node"><title>MPages</title><polygon fill="lightgrey" stroke="black" points="186.542,-324 132.542,-324 132.542,-288 186.542,-288 186.542,-324"/><text text-anchor="middle" x="159.542" y="-301.8" font-family="Times,serif" font-size="14.00">Pages</text></g>&lt;!-- MData&#45;&gt;MPages --&gt;<g id="edge11" class="edge"><title>MData&#45;&gt;MPages</title><path fill="none" stroke="black" d="M159.542,-359.697C159.542,-351.983 159.542,-342.712 159.542,-334.112"/><polygon fill="black" stroke="black" points="163.042,-334.104 159.542,-324.104 156.042,-334.104 163.042,-334.104"/></g>&lt;!-- PArticles --&gt;<g id="node17" class="node"><title>PArticles</title><polygon fill="lightgrey" stroke="black" points="289.86,-324 229.223,-324 229.223,-288 289.86,-288 289.86,-324"/><text text-anchor="middle" x="259.542" y="-301.8" font-family="Times,serif" font-size="14.00">Articles</text></g>&lt;!-- PData&#45;&gt;PArticles --&gt;<g id="edge13" class="edge"><title>PData&#45;&gt;PArticles</title><path fill="none" stroke="black" d="M259.542,-359.697C259.542,-351.983 259.542,-342.712 259.542,-334.112"/><polygon fill="black" stroke="black" points="263.042,-334.104 259.542,-324.104 256.042,-334.104 263.042,-334.104"/></g>&lt;!-- ECatalog --&gt;<g id="node18" class="node"><title>ECatalog</title><polygon fill="lightgrey" stroke="black" points="428.639,-324 322.444,-324 322.444,-288 428.639,-288 428.639,-324"/><text text-anchor="middle" x="375.542" y="-301.8" font-family="Times,serif" font-size="14.00">Product Catalog</text></g>&lt;!-- EData&#45;&gt;ECatalog --&gt;<g id="edge17" class="edge"><title>EData&#45;&gt;ECatalog</title><path fill="none" stroke="black" d="M375.542,-359.697C375.542,-351.983 375.542,-342.712 375.542,-334.112"/><polygon fill="black" stroke="black" points="379.042,-334.104 375.542,-324.104 372.042,-334.104 379.042,-334.104"/></g>&lt;!-- SUsers --&gt;<g id="node19" class="node"><title>SUsers</title><polygon fill="none" stroke="black" points="513.542,-324 459.542,-324 459.542,-288 513.542,-288 513.542,-324"/><text text-anchor="middle" x="486.542" y="-301.8" font-family="Times,serif" font-size="14.00">Users</text></g>&lt;!-- SData&#45;&gt;SUsers --&gt;<g id="edge22" class="edge"><title>SData&#45;&gt;SUsers</title><path fill="none" stroke="black" d="M486.542,-359.697C486.542,-351.983 486.542,-342.712 486.542,-334.112"/><polygon fill="black" stroke="black" points="490.042,-334.104 486.542,-324.104 483.042,-334.104 490.042,-334.104"/></g>&lt;!-- MEmail --&gt;<g id="node29" class="node"><title>MEmail</title><polygon fill="none" stroke="black" points="186.924,-108 132.159,-108 132.159,-72 186.924,-72 186.924,-108"/><text text-anchor="middle" x="159.542" y="-85.8" font-family="Times,serif" font-size="14.00">Emails</text></g>&lt;!-- MPages&#45;&gt;MEmail --&gt;<g id="edge12" class="edge"><title>MPages&#45;&gt;MEmail</title><path fill="none" stroke="black" d="M159.542,-287.849C159.542,-250.832 159.542,-163.181 159.542,-118.386"/><polygon fill="black" stroke="black" points="163.042,-118.232 159.542,-108.232 156.042,-118.232 163.042,-118.232"/></g>&lt;!-- PUsers --&gt;<g id="node20" class="node"><title>PUsers</title><polygon fill="none" stroke="black" points="293.918,-252 225.165,-252 225.165,-216 293.918,-216 293.918,-252"/><text text-anchor="middle" x="259.542" y="-229.8" font-family="Times,serif" font-size="14.00">Accounts</text></g>&lt;!-- PArticles&#45;&gt;PUsers --&gt;<g id="edge14" class="edge"><title>PArticles&#45;&gt;PUsers</title><path fill="none" stroke="black" d="M259.542,-287.697C259.542,-279.983 259.542,-270.712 259.542,-262.112"/><polygon fill="black" stroke="black" points="263.042,-262.104 259.542,-252.104 256.042,-262.104 263.042,-262.104"/></g>&lt;!-- EUsers --&gt;<g id="node21" class="node"><title>EUsers</title><polygon fill="none" stroke="black" points="409.918,-252 341.165,-252 341.165,-216 409.918,-216 409.918,-252"/><text text-anchor="middle" x="375.542" y="-229.8" font-family="Times,serif" font-size="14.00">Accounts</text></g>&lt;!-- ECatalog&#45;&gt;EUsers --&gt;<g id="edge18" class="edge"><title>ECatalog&#45;&gt;EUsers</title><path fill="none" stroke="black" d="M375.542,-287.697C375.542,-279.983 375.542,-270.712 375.542,-262.112"/><polygon fill="black" stroke="black" points="379.042,-262.104 375.542,-252.104 372.042,-262.104 379.042,-262.104"/></g>&lt;!-- SConnections --&gt;<g id="node22" class="node"><title>SConnections</title><polygon fill="none" stroke="black" points="529.535,-252 443.548,-252 443.548,-216 529.535,-216 529.535,-252"/><text text-anchor="middle" x="486.542" y="-229.8" font-family="Times,serif" font-size="14.00">Connections</text></g>&lt;!-- SUsers&#45;&gt;SConnections --&gt;<g id="edge23" class="edge"><title>SUsers&#45;&gt;SConnections</title><path fill="none" stroke="black" d="M486.542,-287.697C486.542,-279.983 486.542,-270.712 486.542,-262.112"/><polygon fill="black" stroke="black" points="490.042,-262.104 486.542,-252.104 483.042,-262.104 490.042,-262.104"/></g>&lt;!-- PComments --&gt;<g id="node23" class="node"><title>PComments</title><polygon fill="none" stroke="black" points="297.711,-180 221.372,-180 221.372,-144 297.711,-144 297.711,-180"/><text text-anchor="middle" x="259.542" y="-157.8" font-family="Times,serif" font-size="14.00">Comments</text></g>&lt;!-- PUsers&#45;&gt;PComments --&gt;<g id="edge15" class="edge"><title>PUsers&#45;&gt;PComments</title><path fill="none" stroke="black" d="M259.542,-215.697C259.542,-207.983 259.542,-198.712 259.542,-190.112"/><polygon fill="black" stroke="black" points="263.042,-190.104 259.542,-180.104 256.042,-190.104 263.042,-190.104"/></g>&lt;!-- EOrders --&gt;<g id="node24" class="node"><title>EOrders</title><polygon fill="none" stroke="black" points="402.638,-180 348.445,-180 348.445,-144 402.638,-144 402.638,-180"/><text text-anchor="middle" x="375.542" y="-157.8" font-family="Times,serif" font-size="14.00">Orders</text></g>&lt;!-- EUsers&#45;&gt;EOrders --&gt;<g id="edge19" class="edge"><title>EUsers&#45;&gt;EOrders</title><path fill="none" stroke="black" d="M375.542,-215.697C375.542,-207.983 375.542,-198.712 375.542,-190.112"/><polygon fill="black" stroke="black" points="379.042,-190.104 375.542,-180.104 372.042,-190.104 379.042,-190.104"/></g>&lt;!-- SContent --&gt;<g id="node25" class="node"><title>SContent</title><polygon fill="lightgrey" stroke="black" points="516.873,-180 456.21,-180 456.21,-144 516.873,-144 516.873,-180"/><text text-anchor="middle" x="486.542" y="-157.8" font-family="Times,serif" font-size="14.00">Content</text></g>&lt;!-- SConnections&#45;&gt;SContent --&gt;<g id="edge24" class="edge"><title>SConnections&#45;&gt;SContent</title><path fill="none" stroke="black" d="M486.542,-215.697C486.542,-207.983 486.542,-198.712 486.542,-190.112"/><polygon fill="black" stroke="black" points="490.042,-190.104 486.542,-180.104 483.042,-190.104 490.042,-190.104"/></g>&lt;!-- PShared --&gt;<g id="node26" class="node"><title>PShared</title><polygon fill="none" stroke="black" points="303.204,-108 215.879,-108 215.879,-72 303.204,-72 303.204,-108"/><text text-anchor="middle" x="259.542" y="-85.8" font-family="Times,serif" font-size="14.00">Most Shared</text></g>&lt;!-- PComments&#45;&gt;PShared --&gt;<g id="edge16" class="edge"><title>PComments&#45;&gt;PShared</title><path fill="none" stroke="black" d="M259.542,-143.697C259.542,-135.983 259.542,-126.712 259.542,-118.112"/><polygon fill="black" stroke="black" points="263.042,-118.104 259.542,-108.104 256.042,-118.104 263.042,-118.104"/></g>&lt;!-- ECross --&gt;<g id="node27" class="node"><title>ECross</title><polygon fill="none" stroke="black" points="429.983,-108 321.1,-108 321.1,-72 429.983,-72 429.983,-108"/><text text-anchor="middle" x="375.542" y="-85.8" font-family="Times,serif" font-size="14.00">Product Clusters</text></g>&lt;!-- EOrders&#45;&gt;ECross --&gt;<g id="edge20" class="edge"><title>EOrders&#45;&gt;ECross</title><path fill="none" stroke="black" d="M375.542,-143.697C375.542,-135.983 375.542,-126.712 375.542,-118.112"/><polygon fill="black" stroke="black" points="379.042,-118.104 375.542,-108.104 372.042,-118.104 379.042,-118.104"/></g>&lt;!-- SComments --&gt;<g id="node28" class="node"><title>SComments</title><polygon fill="none" stroke="black" points="524.711,-108 448.372,-108 448.372,-72 524.711,-72 524.711,-108"/><text text-anchor="middle" x="486.542" y="-85.8" font-family="Times,serif" font-size="14.00">Comments</text></g>&lt;!-- SContent&#45;&gt;SComments --&gt;<g id="edge25" class="edge"><title>SContent&#45;&gt;SComments</title><path fill="none" stroke="black" d="M486.542,-143.697C486.542,-135.983 486.542,-126.712 486.542,-118.112"/><polygon fill="black" stroke="black" points="490.042,-118.104 486.542,-108.104 483.042,-118.104 490.042,-118.104"/></g>&lt;!-- ECart --&gt;<g id="node30" class="node"><title>ECart</title><polygon fill="none" stroke="black" points="402.542,-36 348.542,-36 348.542,-0 402.542,-0 402.542,-36"/><text text-anchor="middle" x="375.542" y="-13.8" font-family="Times,serif" font-size="14.00">Cart</text></g>&lt;!-- ECross&#45;&gt;ECart --&gt;<g id="edge21" class="edge"><title>ECross&#45;&gt;ECart</title><path fill="none" stroke="black" d="M375.542,-71.6966C375.542,-63.9827 375.542,-54.7125 375.542,-46.1124"/><polygon fill="black" stroke="black" points="379.042,-46.1043 375.542,-36.1043 372.042,-46.1044 379.042,-46.1043"/></g>&lt;!-- SChat --&gt;<g id="node31" class="node"><title>SChat</title><polygon fill="none" stroke="black" points="513.542,-36 459.542,-36 459.542,-0 513.542,-0 513.542,-36"/><text text-anchor="middle" x="486.542" y="-13.8" font-family="Times,serif" font-size="14.00">Chat</text></g>&lt;!-- SComments&#45;&gt;SChat --&gt;<g id="edge26" class="edge"><title>SComments&#45;&gt;SChat</title><path fill="none" stroke="black" d="M486.542,-71.6966C486.542,-63.9827 486.542,-54.7125 486.542,-46.1124"/><polygon fill="black" stroke="black" points="490.042,-46.1043 486.542,-36.1043 483.042,-46.1044 490.042,-46.1043"/></g></g></svg></p>
          
          <p>Lets walk through this.  A <em>data model</em> is the structure that all of the site data fits into.  This represents the heart of what your database model, object model, and product design are all orbiting around.  In the beginning of development this rapidly changes, but once the site is released changes are incremental and relatively rare. It&#39;s easy to add functionality that doesn&#39;t change the data model, but when you start making drastic changes, the nature of what you are building changes.  Wordpress sites have pages, posts, categories and users, and if you try and jam in a product catalog then it becomes something different than a standard blog.</p>
          
          <p>The next level is the bulk of the data on the site.  <em>Marketing</em> sites have pages that change rarely.  <em>Publishing</em> sites keep adding more articles, but these really don&#39;t change that much and the bulk of the access pattern is read only.  <em>Commerce</em> sites have product catalogs, and while merchandizers add and remove things from time to time, you largely expect to have things on there forever.  Again this is mostly, though not completely, read-only.</p>
          
          <p>For SEO to work correctly, the data in the gray boxes really should be rendered on the server.  The <em>Social Site</em> is a bit of an outlier here, in that the root object is actually the user and the user&#39;s content.  </p>
          
          <p>Let&#39;s compare <a href="https://medium.com">medium.com</a> with <a href="http://facebook.com">facebook.com</a>.  Since the bulk of the content of Medium is accessable to anyone once it&#39;s published.  For this discussion its considered to be a publishing site rather than a social site.  Bits and elements of the page change based upon who is accessing the site, but for the most part, everyone sees the same stuff.  Facebook on the other hand looks different for each of the users.  Individual items may be public, but the main consumption is through the feed and that&#39;s based upon your friends <em>and magic</em>, so scaling has a whole different set of challenges.  Probably involving something very esoteric.</p>
          
          <h2 id="towards-a-more-nerdy-taxonomy-of-data">Towards a more nerdy taxonomy of data</h2>
          
          <p>We can look at each of the elements on a website and break down the type of data source it came from:</p>
          
          <ul>
          <li><strong>Static Data</strong>: Templates, Images, Fonts, Assets</li>
          <li><strong>Structural Data</strong>: Pages, Articles, Product Catalog, Categories, &quot;Content&quot;</li>
          <li><strong>Dynamic Data</strong>: Inventory, Comments</li>
          <li><strong>Session Data</strong>: User names, Items in cart, Likes, etc.</li>
          </ul>
          
          <p>As we go down the list, the rate in which these things change increases.  <em>Static data</em>, as the name implies, rarely changes.  Most of these are artifacts that come out of the development process or development tooling.  Templates, for example, are created during the site development process and once the site is deployed they change only in response to bug fixes or feature requests.</p>
          
          <p><em>Structural Data</em> changes during the operations of the business, but not very frequently, and generally in response to things that are outside of the site <em>per se</em>.  These include things like marketing material, product pages (less inventory information), categories, articles, and really the bulk of the content on a site.  There are many reasons why you want to generate these pages using some sort of CMS, but rarely does this data change at <em>run-time</em>.  This stuff doesn&#39;t really need to be in a run-time database as such, but it&#39;s convient to stick this stuff there if you have one laying around.</p>
          
          <p><em>Dynamic Data</em> is <em>run-time</em> data, that is to say, things that change as part of site operations, things like newsletter signups, orders and credit card transactions.  Most <em>User Generated Content</em> falls in the this category, and depending upon your feature set, that could be the majority of the pages.  Unlike <em>Structural Data</em>, where it&#39;s merely a good idea to use a database, this is <em>neccessarily</em> stored in some sort of database.</p>
          
          <p><em>Session Data</em> is <em>specific to the user</em> and renders the page differently based upon their session, such as their name, whether they&#39;ve added an item into the cart or not, etc.  One of the things that makes straight <em>page caching</em> useless in practice is that the header is different on most sites based on if you are logged in or not, or if there are items in the cart.  This gets persisted from page to page, but generally can get thrown away if the user wanders off.</p>
          
          <h2 id="what-do-we-need-to-assemble-a-website">What do we need to assemble a website</h2>
          
          <p>A website is a series of interconnected webpages.  These pages are referenced by URLs, and the world of linking and SEO demands that these URLs return self-contained data so that you can deep link and get yourself found on the search engines.  From the outside, it looks like:</p>
          
          <p><svg width="314pt" height="188pt" viewBox="0.00 0.00 313.55 188.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 184)"><title>Sitemaps</title><polygon fill="white" stroke="none" points="-4,4 -4,-184 309.553,-184 309.553,4 -4,4"/>&lt;!-- a --&gt;<g id="node1" class="node"><title>a</title><ellipse fill="none" stroke="black" cx="165.909" cy="-162" rx="42.0717" ry="18"/><text text-anchor="middle" x="165.909" y="-157.8" font-family="Times,serif" font-size="14.00">Site Map</text></g>&lt;!-- b --&gt;<g id="node5" class="node"><title>b</title><ellipse fill="none" stroke="black" cx="92.9093" cy="-90" rx="27.0958" ry="18"/><text text-anchor="middle" x="92.9093" y="-85.8" font-family="Times,serif" font-size="14.00">Page</text></g>&lt;!-- a&#45;&gt;b --&gt;<g id="edge1" class="edge"><title>a&#45;&gt;b</title><path fill="none" stroke="black" d="M149.344,-145.116C139.227,-135.415 126.163,-122.887 115.152,-112.329"/><polygon fill="black" stroke="black" points="117.559,-109.788 107.919,-105.393 112.714,-114.84 117.559,-109.788"/></g>&lt;!-- c --&gt;<g id="node6" class="node"><title>c</title><ellipse fill="none" stroke="black" cx="165.909" cy="-90" rx="27.0958" ry="18"/><text text-anchor="middle" x="165.909" y="-85.8" font-family="Times,serif" font-size="14.00">Page</text></g>&lt;!-- a&#45;&gt;c --&gt;<g id="edge2" class="edge"><title>a&#45;&gt;c</title><path fill="none" stroke="black" d="M165.909,-143.697C165.909,-135.983 165.909,-126.712 165.909,-118.112"/><polygon fill="black" stroke="black" points="169.409,-118.104 165.909,-108.104 162.409,-118.104 169.409,-118.104"/></g>&lt;!-- d --&gt;<g id="node7" class="node"><title>d</title><ellipse fill="none" stroke="black" cx="238.909" cy="-90" rx="27.0958" ry="18"/><text text-anchor="middle" x="238.909" y="-85.8" font-family="Times,serif" font-size="14.00">Page</text></g>&lt;!-- a&#45;&gt;d --&gt;<g id="edge3" class="edge"><title>a&#45;&gt;d</title><path fill="none" stroke="black" d="M182.474,-145.116C192.591,-135.415 205.656,-122.887 216.666,-112.329"/><polygon fill="black" stroke="black" points="219.104,-114.84 223.9,-105.393 214.259,-109.788 219.104,-114.84"/></g>&lt;!-- e --&gt;<g id="node2" class="node"><title>e</title><ellipse fill="none" stroke="black" cx="48.9093" cy="-18" rx="48.8187" ry="18"/><text text-anchor="middle" x="48.9093" y="-13.8" font-family="Times,serif" font-size="14.00">Javascripts</text></g>&lt;!-- f --&gt;<g id="node3" class="node"><title>f</title><ellipse fill="none" stroke="black" cx="165.909" cy="-18" rx="49.7964" ry="18"/><text text-anchor="middle" x="165.909" y="-13.8" font-family="Times,serif" font-size="14.00">Stylesheets</text></g>&lt;!-- g --&gt;<g id="node4" class="node"><title>g</title><ellipse fill="none" stroke="black" cx="269.909" cy="-18" rx="35.7887" ry="18"/><text text-anchor="middle" x="269.909" y="-13.8" font-family="Times,serif" font-size="14.00">Images</text></g>&lt;!-- b&#45;&gt;e --&gt;<g id="edge4" class="edge"><title>b&#45;&gt;e</title><path fill="none" stroke="black" d="M82.925,-73.1159C77.6218,-64.679 70.9749,-54.1044 64.9671,-44.5465"/><polygon fill="black" stroke="black" points="67.7526,-42.4011 59.4676,-35.7973 61.8261,-46.1263 67.7526,-42.4011"/></g>&lt;!-- b&#45;&gt;f --&gt;<g id="edge7" class="edge"><title>b&#45;&gt;f</title><path fill="none" stroke="black" d="M107.682,-74.8345C117.431,-65.4862 130.431,-53.0203 141.674,-42.2391"/><polygon fill="black" stroke="black" points="144.32,-44.5508 149.116,-35.1033 139.475,-39.4983 144.32,-44.5508"/></g>&lt;!-- b&#45;&gt;g --&gt;<g id="edge10" class="edge"><title>b&#45;&gt;g</title><path fill="none" stroke="black" d="M114.712,-78.6811C119.679,-76.4146 124.953,-74.0738 129.909,-72 132.434,-70.9436 192.282,-48.3186 232.902,-32.9744"/><polygon fill="black" stroke="black" points="234.144,-36.2471 242.262,-29.4393 231.67,-29.6986 234.144,-36.2471"/></g>&lt;!-- c&#45;&gt;e --&gt;<g id="edge5" class="edge"><title>c&#45;&gt;e</title><path fill="none" stroke="black" d="M146.326,-77.2836C128.873,-66.8413 102.961,-51.3386 82.2481,-38.9463"/><polygon fill="black" stroke="black" points="83.8169,-35.8063 73.4385,-33.6756 80.2229,-41.8133 83.8169,-35.8063"/></g>&lt;!-- c&#45;&gt;f --&gt;<g id="edge8" class="edge"><title>c&#45;&gt;f</title><path fill="none" stroke="black" d="M165.909,-71.6966C165.909,-63.9827 165.909,-54.7125 165.909,-46.1124"/><polygon fill="black" stroke="black" points="169.409,-46.1043 165.909,-36.1043 162.409,-46.1044 169.409,-46.1043"/></g>&lt;!-- c&#45;&gt;g --&gt;<g id="edge11" class="edge"><title>c&#45;&gt;g</title><path fill="none" stroke="black" d="M184.502,-76.4854C200.168,-65.9413 222.848,-50.6758 240.9,-38.5255"/><polygon fill="black" stroke="black" points="242.997,-41.3328 249.339,-32.8454 239.089,-35.5257 242.997,-41.3328"/></g>&lt;!-- d&#45;&gt;e --&gt;<g id="edge6" class="edge"><title>d&#45;&gt;e</title><path fill="none" stroke="black" d="M217.541,-78.7547C212.459,-76.4372 207.026,-74.0559 201.909,-72 166.251,-57.6716 125.047,-43.5325 94.3876,-33.4665"/><polygon fill="black" stroke="black" points="95.4168,-30.1208 84.8243,-30.3463 93.2455,-36.7755 95.4168,-30.1208"/></g>&lt;!-- d&#45;&gt;f --&gt;<g id="edge9" class="edge"><title>d&#45;&gt;f</title><path fill="none" stroke="black" d="M224.137,-74.8345C214.388,-65.4862 201.388,-53.0203 190.144,-42.2391"/><polygon fill="black" stroke="black" points="192.343,-39.4983 182.703,-35.1033 187.498,-44.5508 192.343,-39.4983"/></g>&lt;!-- d&#45;&gt;g --&gt;<g id="edge12" class="edge"><title>d&#45;&gt;g</title><path fill="none" stroke="black" d="M246.256,-72.411C249.832,-64.3352 254.218,-54.4312 258.238,-45.3547"/><polygon fill="black" stroke="black" points="261.551,-46.517 262.4,-35.9562 255.151,-43.6825 261.551,-46.517"/></g></g></svg></p>
          
          <p>The main entry point is the <em>Sitemap</em>.  Conceptually, this is the overview of what can be found on the site.  In a specific, SEO sense, a sitemap is a way of communicating to search engines the structure of your site so the search results can be better organized.  But in a more general sense, the sitemap is a collection of all of the pages that make up the site.</p>
          
          <p>The conceptual sitemap is a list of URLs that makes up your site.  If you have a completely static <em>Marketing</em> site, then the sitemaps is just the collection of the static HTML files that is on the webserver filesystem.  If you have a <em>Publishing</em> or <em>Commerce</em> site, the list of page urls depend upon the templates and the data in the database: even if they use the same template, every individual post has it&#39;s own permalink or <em>canonical URL</em>, every product in the catalog has it&#39;s own product detail page.</p>
          
          <h2 id="how-urls-are-made-on-the-inside">How urls are made on the inside</h2>
          
          <p>Lets take an example of a <em>Commerce</em> site, and how those URLs are generated.  I don&#39;t know the actual details, but lets look at how <code>http://www.thinkgeek.com/product/1dbd/</code> could be generated.</p>
          
          <p>From the inside of a website, it looks a little more like this:</p>
          
          <p><svg width="408pt" height="152pt" viewBox="0.00 0.00 408.03 152.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 148)"><title>Routing</title><polygon fill="white" stroke="none" points="-4,4 -4,-148 404.027,-148 404.027,4 -4,4"/>&lt;!-- b --&gt;<g id="node1" class="node"><title>b</title><ellipse fill="none" stroke="black" cx="31.2223" cy="-99" rx="31.4462" ry="18"/><text text-anchor="middle" x="31.2223" y="-94.8" font-family="Times,serif" font-size="14.00">router</text></g>&lt;!-- c --&gt;<g id="node2" class="node"><title>c</title><ellipse fill="none" stroke="black" cx="142.928" cy="-126" rx="44.4664" ry="18"/><text text-anchor="middle" x="142.928" y="-121.8" font-family="Times,serif" font-size="14.00">controller</text></g>&lt;!-- b&#45;&gt;c --&gt;<g id="edge1" class="edge"><title>b&#45;&gt;c</title><path fill="none" stroke="black" d="M60.1895,-105.883C70.7038,-108.471 82.969,-111.489 94.7521,-114.389"/><polygon fill="black" stroke="black" points="93.9407,-117.794 104.487,-116.785 95.6137,-110.997 93.9407,-117.794"/></g>&lt;!-- g --&gt;<g id="node3" class="node"><title>g</title><ellipse fill="none" stroke="black" cx="142.928" cy="-72" rx="44.4664" ry="18"/><text text-anchor="middle" x="142.928" y="-67.8" font-family="Times,serif" font-size="14.00">controller</text></g>&lt;!-- b&#45;&gt;g --&gt;<g id="edge5" class="edge"><title>b&#45;&gt;g</title><path fill="none" stroke="black" d="M60.1895,-92.1169C70.7038,-89.5292 82.969,-86.5106 94.7521,-83.6106"/><polygon fill="black" stroke="black" points="95.6137,-87.0031 104.487,-81.2146 93.9407,-80.2059 95.6137,-87.0031"/></g>&lt;!-- e --&gt;<g id="node4" class="node"><title>e</title><ellipse fill="none" stroke="black" cx="142.928" cy="-18" rx="42.0524" ry="18"/><text text-anchor="middle" x="142.928" y="-13.8" font-family="Times,serif" font-size="14.00">datastore</text></g>&lt;!-- c&#45;&gt;e --&gt;<g id="edge2" class="edge"><title>c&#45;&gt;e</title><path fill="none" stroke="black" d="M108.577,-114.263C97.6138,-108.704 86.7092,-100.839 80.4446,-90 72.4384,-76.1472 72.4384,-67.8528 80.4446,-54 85.1832,-45.801 92.5766,-39.3043 100.642,-34.2196"/><polygon fill="black" stroke="black" points="102.536,-37.1709 109.564,-29.2427 99.126,-31.0577 102.536,-37.1709"/></g>&lt;!-- d --&gt;<g id="node5" class="node"><title>d</title><ellipse fill="none" stroke="black" cx="263.965" cy="-126" rx="40.6075" ry="18"/><text text-anchor="middle" x="263.965" y="-121.8" font-family="Times,serif" font-size="14.00">template</text></g>&lt;!-- c&#45;&gt;d --&gt;<g id="edge3" class="edge"><title>c&#45;&gt;d</title><path fill="none" stroke="black" d="M187.577,-126C195.879,-126 204.626,-126 213.105,-126"/><polygon fill="black" stroke="black" points="213.265,-129.5 223.265,-126 213.265,-122.5 213.265,-129.5"/></g>&lt;!-- g&#45;&gt;e --&gt;<g id="edge6" class="edge"><title>g&#45;&gt;e</title><path fill="none" stroke="black" d="M142.928,-53.7902C142.928,-51.3082 142.928,-48.8262 142.928,-46.3443"/><polygon fill="black" stroke="black" points="146.428,-46.1406 142.928,-36.1406 139.428,-46.1407 146.428,-46.1406"/></g>&lt;!-- h --&gt;<g id="node6" class="node"><title>h</title><ellipse fill="none" stroke="black" cx="263.965" cy="-72" rx="40.6075" ry="18"/><text text-anchor="middle" x="263.965" y="-67.8" font-family="Times,serif" font-size="14.00">template</text></g>&lt;!-- g&#45;&gt;h --&gt;<g id="edge7" class="edge"><title>g&#45;&gt;h</title><path fill="none" stroke="black" d="M187.577,-72C195.879,-72 204.626,-72 213.105,-72"/><polygon fill="black" stroke="black" points="213.265,-75.5001 223.265,-72 213.265,-68.5001 213.265,-75.5001"/></g>&lt;!-- i --&gt;<g id="node7" class="node"><title>i</title><ellipse fill="none" stroke="black" cx="370.273" cy="-99" rx="29.5104" ry="18"/><text text-anchor="middle" x="370.273" y="-94.8" font-family="Times,serif" font-size="14.00">result</text></g>&lt;!-- d&#45;&gt;i --&gt;<g id="edge4" class="edge"><title>d&#45;&gt;i</title><path fill="none" stroke="black" d="M299.408,-117.084C310.021,-114.337 321.744,-111.303 332.507,-108.517"/><polygon fill="black" stroke="black" points="333.66,-111.834 342.464,-105.939 331.906,-105.057 333.66,-111.834"/></g>&lt;!-- h&#45;&gt;i --&gt;<g id="edge8" class="edge"><title>h&#45;&gt;i</title><path fill="none" stroke="black" d="M299.408,-80.9156C310.021,-83.6627 321.744,-86.6972 332.507,-89.4832"/><polygon fill="black" stroke="black" points="331.906,-92.9429 342.464,-92.0605 333.66,-86.1662 331.906,-92.9429"/></g></g></svg></p>
          
          <p>A request comes into the server and the <code>router</code> determines what the user is asking for.  In our example, since the path of the url is <code>/product/1dbd/</code>, the router looks at that and says &quot;this is a product page&quot; so let&#39;s hand the request off to the <code>product</code> controller, which is the part of the code that knows about product stuff.</p>
          
          <p>The controller would load up the product with the id <code>1dbd</code> from the product catalog in the database, in this case <em>Flux Capacitor USB Car Charger</em>, which we can all agree is a necessary car accessory, and then use those details to fill out the product template.</p>
          
          <p>The developers of this site didn&#39;t code up each of these product pages, they coded up one <code>template</code> that represents all of the possible product pages that could be served up, they coded up a <code>controller</code> which knows how to pull the data from the database, and they wired up the whole thing using a <code>router</code>.</p>
          
          <h2 id="sitemaps-in-static-site-generators">Sitemaps in static site generators</h2>
          
          <p>Our conceptual sitemap then is composed then of the set routes and database ids.  The pages themselves are a cross product of the templates and the data for each of the pages:</p>
          
          <p><strong>Data x Templates = Pages</strong></p>
          
          <p>One of the things that&#39;s exciting about <a href="https://middlemanapp.com">Middleman</a> is that it has a <a href="/building-middleman-extensions/#manipulating-the-sitemap">manipulatable concept of a sitemap</a>.</p>
          
          <p>The main thing that middleman does it to give front-end developers tooling to build sites, so you get the benefits of layouts and partials and SASS and helper methods and javascript minification all the other front-end tooling that you get with rails, but without needing to run a server.  This lets you build fancy sites using the &quot;normal&quot; tools and you can still host them on github pages or divshot or a cheap server.</p>
          
          <p>I&#39;ve written about Middleman before:</p>
          
          <ul>
          <li><a href="/building-sites-with-middleman/">Building Sites with Middleman</a></li>
          <li><a href="/middleman-tricks-and-hacks/">Middleman Tricks and Hacks</a></li>
          <li><a href="/building-middleman-extensions/">Building Middleman Extensions</a></li>
          </ul>
          
          <p>If we want to pre-render the pages on the server at build time we&#39;ll need both the routes as well as the &quot;database IDs&quot;.  That gives us the list of files, and to generate the files themselves we&#39;ll need the data for each specific page.  In a basic way, this can be done using <a href="/advanced/dynamic_pages/">page proxies</a>, excerpt from the Middleman docs:</p>
          
          <pre><code>[&quot;tom&quot;, &quot;dick&quot;, &quot;harry&quot;].each do |name|&#x000A;  proxy &quot;/about/#{name}.html&quot;, &quot;/about/template.html&quot;, :locals =&gt; { :person_name =&gt; name }, :ignore =&gt; true&#x000A;end&#x000A;</code></pre>
          
          <p>If you put that code in your <code>config.rb</code> it will create 3 pages in the middleman sitemap. (Found on <code>http://localhost:4567/__middleman/sitemap/</code> if you have a local build running.) These files will be named <code>/about/tom.html</code>, <code>/about/dick.html</code>, and <code>/about/tom.html</code>, all generated from the <code>/about/template.html</code> template.</p>
          
          <p>You could imagine instead passing in a complex object instead of a string.  I touched on this in a basic way before in the <a href="/middleman-tricks-and-hacks/#site-data-as-database">Using Site Data as a Database</a>.</p>
          
          <p>In the simpliest form, you could dump your data in the <code>data/</code> directory as <code>books.json</code>, and then put this in your <code>config.rb</code> to generate a product catalog:</p>
          
          <pre><code>data.books.each do |book|&#x000A;  proxy &quot;/book/#{book.slug}.html&quot;, &quot;/book.html&quot;, locals: { book: book }, ignore: true&#x000A;end&#x000A;</code></pre>
          
          <p>As a proof of concept this works, but for a real system there would at least need to be a mechanism to sync the json from the database.  For a more robust mechanism, remember that Middleman exposes a <a href="/building-middleman-extensions/#manipulating-the-sitemap">manipulatable concept of a sitemap</a> to extensions.</p>
          
          <h2 id="making-front-end-development-easy">Making front-end development easy</h2>
          
          <p>The story thus far is that we can split out data into static, dynamic, and session data, and we can use Middleman&#39;s sitemap concept to generate static pages that can be served straight from S3 for all we care and it will all be indexable by Google.  Sweet!!!</p>
          
          <p>Now lets talk about how we can actually implement some of these templates.</p>
          
          <p>We&#39;ve broken down pages and split out when different parts will be rendered based upon our <a href="#towards-a-more-nerdy-taxonomy-of-data">taxonomy of data</a>.  We&#39;ve figured out a basic structure of how to render the <em>Structural Data</em> into the page, and now we need to figure out a good way to render the <em>Dynamic</em> and <em>Session</em> data in there too. And we also want to make this friendly for front-end developers.  It&#39;s not practical to have different templating engines and coding styles for bits of data that, during the development process, may turn out to be <em>Site</em> or <em>Dynamic</em> data.</p>
          
          <p>This is different than using Varnish, CloudFront or Rails Page Level caching.  In those scenarios, there&#39;s no easy way to distinguish between elements on the page that everyone can see, vs elements that only specific people can see.  It&#39;s all or nothing.</p>
          
          <p>For example, when Admins are logged into wordpress sites, they have a toolbar that regular browsers don&#39;t see, so the page caching mechanisms need to have a way to subvert the caching process for logged in users.  In this mechanism, we are going to send the same basic page data to all of the users, and then use client side javascript templating to change the DOM for the user based upon API calls that we make on their request.</p>
          
          <h2 id="enter-react">Enter React</h2>
          
          <p><a href="https://facebook.github.io/react/">React</a> is a javascript view framework from Facebook that focuses solely on the view layer.  (We&#39;re only going to be talking about the React part, and you can use <a href="https://facebook.github.io/flux/">flux</a> or not, up to you.)</p>
          
          <p>React works by enforcing a specific dataflow model on how components are rendered into the DOM.  React lets you build heirachies of components that know how to render themselves and deal with different user actions.  Much of what we&#39;ve been talking about above thinking about page generation from a dataflow perspective, splitting the data up into different sources based upon their rate of change, and breaking up the page based upon how the data flows into it.With the goal of trying to prerender all of the stuff that&#39;s the same for everyone.</p>
          
          <p>React has a more focused dataflow model, working by passing in a component, data, and a DOM element, and it render out the HTML in that element.  Components can be nested and have complex logic, and when you change the state of a particular component, all of the subcomponents will be refreshed as needed.</p>
          
          <p>React has two concepts of data, one is called <em>properties</em> which is inherited from above and considered to be immutable.  The other is called <em>state</em>, which is owned by a component and can be changed and passed to any children components.  In React, this is about data ownership and to keep the page updates efficient.</p>
          
          <h2 id="rendering-react-on-the-server-side">Rendering React on the server side</h2>
          
          <p>One of the most interesting things about React is that you can render the HTML on the server side as well as the client side.  Rendering on the server will include data attributes on the DOM so that the client Javascript can pick it up from there.  In other words, if the data is available, you can render a template on the server or the client and it will <em>work the exact same way</em>.  This is the one templating system that will be easy to move from <em>Structural Data on the server</em> to <em>Dynamic Data on the client</em>!</p>
          
          <p>Obviously you need to have the data available on the server at render time, and you&#39;ll pass it to the precompiler in a different way than you would on the client (one is passed to the JavaScript engine and the other is probably a result of a JSON AJAX call but all of the interaction and user logic remains the same), but outside of the wiring the business and interaction logic completely shared.</p>
          
          <p>If you are using <a href="https://github.com/reactjs/react-rails"><code>react-rails</code></a> this looks like:</p>
          
          <pre><code>&lt;%= react_component(&#39;HelloMessage&#39;, {name: &#39;John&#39;}, {prerender: true}) %&gt;&#x000A;&lt;!-- becomes: --&gt;&#x000A;&lt;div data-react-class=&quot;HelloMessage&quot; data-react-props=&quot;{&amp;quot;name&amp;quot;:&amp;quot;John&amp;quot;}&quot;&gt;&#x000A;  &lt;h1&gt;Hello, John!&lt;/h1&gt;&#x000A;&lt;/div&gt;&#x000A;</code></pre>
          
          <p>When you instantiate the javascript environment in the client, it will look for the <code>data-react-*</code> attributes and plug in your components there.</p>
          
          <p>I&#39;ve ported this functionality over to HappyFunCorp&#39;s fork of the <a href="https://github.com/HappyFunCorp/middleman-react">middleman-react gem</a> that you can use in middleman.</p>
          
          <h2 id="javascript-and-web-services-sitting-in-a-tree">Javascript and web services sitting in a tree</h2>
          
          <p>The trick is that React can also be rendered on the server, and then the javascript that&#39;s run on the client side can pick it up from there.  At this point in the process all of the <em>Structural Data</em> is available both in rendered HTML and also in the React components themselves, passed in as <em>properties</em> or <em>state</em>.</p>
          
          <p>Our components are ready to go!  They&#39;ve either rendered <em>Site Data</em> from the server, or they can pull in <em>Dynamic and Session Data</em> in from an API, and use that to render the page.  These components are written in the same way, using the same technology, so you don&#39;t need to have a different style of building or constructing the front end, other than breaking down where the components get data from.  Which ones get rendered on the server?  Do they have enough data to render what they need?  Do they need to have additional data that can be loaded in at client-run-time?  Or is it all straight from an API?</p>
          
          <h2 id="enter-parse">Enter Parse</h2>
          
          <p>One of the benefits of this is that there are API-as-services out there, like <a href="https://parse.com">Parse</a> or <a href="https://www.firebase.com">Firebase</a>.  All of your data could live in these systems, and you can pull certain stuff out during the build process, and other data out at Runtime, and they handle both security, user accounts, and, more importantly, operational scaling support.  From an ops perspective, you don&#39;t need to do anything other than build the site and pay the hosting builds, and all of the tricky scaling stuff handled is by a third party.</p>
          
          <p><img class="img-responsive" src="../images/seed_sequence-19612778.png" /></p>
          
          <h2 id="bringing-back-a-build-server">Bringing back a build server</h2>
          
          <div class="diagram_right">
          <svg width="228pt" height="302pt" viewBox="0.00 0.00 228.08 302.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 298)"><title>deployment</title><polygon fill="white" stroke="none" points="-4,4 -4,-298 224.078,-298 224.078,4 -4,4"/><!-- Build Server --><g id="node1" class="node"><title>Build Server</title><ellipse fill="none" stroke="black" cx="113.656" cy="-276" rx="55.1079" ry="18"/><text text-anchor="middle" x="113.656" y="-271.8" font-family="Times,serif" font-size="14.00">Build Server</text></g><!-- Static Files --><g id="node2" class="node"><title>Static Files</title><ellipse fill="none" stroke="black" cx="49.6563" cy="-190" rx="49.8131" ry="18"/><text text-anchor="middle" x="49.6563" y="-185.8" font-family="Times,serif" font-size="14.00">Static Files</text></g><!-- Build Server&#45;&gt;Static Files --><g id="edge1" class="edge"><title>Build Server&#45;&gt;Static Files</title><path fill="none" stroke="black" d="M96.1299,-258.625C90.5065,-252.977 84.4446,-246.444 79.4424,-240 73.8261,-232.765 68.3996,-224.402 63.7518,-216.656"/><polygon fill="black" stroke="black" points="66.7419,-214.835 58.6888,-207.951 60.6909,-218.355 66.7419,-214.835"/><text text-anchor="middle" x="100.263" y="-228.8" font-family="Times,serif" font-size="14.00">Deploy</text></g><!-- Client --><g id="node3" class="node"><title>Client</title><ellipse fill="none" stroke="black" cx="44.6563" cy="-104" rx="31.948" ry="18"/><text text-anchor="middle" x="44.6563" y="-99.8" font-family="Times,serif" font-size="14.00">Client</text></g><!-- Static Files&#45;&gt;Client --><g id="edge2" class="edge"><title>Static Files&#45;&gt;Client</title><path fill="none" stroke="black" d="M46.2496,-171.98C45.265,-166.289 44.3253,-159.893 43.8389,-154 43.2694,-147.1 43.1445,-139.636 43.2392,-132.663"/><polygon fill="black" stroke="black" points="46.7492,-132.358 43.5362,-122.262 39.7521,-132.158 46.7492,-132.358"/><text text-anchor="middle" x="79.065" y="-142.8" font-family="Times,serif" font-size="14.00">User Access</text></g><!-- Parse --><g id="node4" class="node"><title>Parse</title><ellipse fill="none" stroke="black" cx="90.6563" cy="-18" rx="29.0257" ry="18"/><text text-anchor="middle" x="90.6563" y="-13.8" font-family="Times,serif" font-size="14.00">Parse</text></g><!-- Client&#45;&gt;Parse --><g id="edge3" class="edge"><title>Client&#45;&gt;Parse</title><path fill="none" stroke="black" d="M43.6422,-85.7706C43.7746,-75.9442 45.1857,-63.6942 50.3008,-54 53.425,-48.079 57.9961,-42.7142 62.9497,-38.0628"/><polygon fill="black" stroke="black" points="65.5066,-40.485 70.8957,-31.3632 60.9944,-35.1333 65.5066,-40.485"/><text text-anchor="middle" x="85.834" y="-56.8" font-family="Times,serif" font-size="14.00">Update Data</text></g><!-- Parse&#45;&gt;Build Server --><g id="edge4" class="edge"><title>Parse&#45;&gt;Build Server</title><path fill="none" stroke="black" d="M106.772,-33.1082C112.276,-38.9538 117.769,-46.1938 120.656,-54 145.151,-120.214 130.838,-205.352 120.835,-248.049"/><polygon fill="black" stroke="black" points="117.389,-247.408 118.411,-257.953 124.188,-249.072 117.389,-247.408"/><text text-anchor="middle" x="177.367" y="-142.8" font-family="Times,serif" font-size="14.00">Trigger Update</text></g></g></svg></div>
          
          <p>There still needs to be a way to get new versions of <em>Structural Data</em> onto the site.  For this, we need to host middleman somewhere on a build server, and everytime <em>Structural Data</em> changes we need to trigger another build that pushes up the static content.  Parse has <a href="https://parse.com/docs/js/guide#cloud-code-aftersave-triggers">afterSave triggers</a> that could, for example, ping your build server to first pull down the data changes, and then push the code out.</p>
          
          <p>Remember, this would only be for <em>Structural Data</em> updates, for example if an Admin user updated a product description.  If a customer added an item to their cart or placed an order, this would all be dynamic data inside of the data store and managed on the client site.  It would only update Parse, not the site that everyone would access.</p>
          
          <h2 id="advantages">Advantages</h2>
          
          <p>The advantages of this way of building things are:</p>
          
          <ol>
          <li>You get full SEO with a heavy client JavaScript site without having to do crazy things with PhantomJS or meta fragments.</li>
          <li>Hosting and operations become both cheap and doesn&#39;t require a support team.</li>
          <li>Scaling out the system is mainly a bandwidth problem, and secondarily a API scaling problem for a subset of behavior.</li>
          <li>The system breaks gracefully. If you overwhelm the API server the site is still available for browsing.  Assuming that most usage of the sites are reads, this means that if you try to <em>break the internet</em> with <a href="http://www.papermag.com/2014/11/kim_kardashian.php">Kim Kardashian&#39;s ass</a> maybe user login will slow down, but everything else is still available.</li>
          <li>You are able to build your front end using modern and clean fancy JavaScript technologies and don&#39;t need to mess around with back-end coding.</li>
          </ol>
        </div>
        <div class='navigation' data-offset-top='400' data-spy='affix'>
          <div class='next'>
            <p>
              Next in
              <a href="/tag/Chronological.html">Chronological</a>
              <a href="/tag/Howto.html">Howto</a>
            </p>
            <p class='title'><a href="/osx-script-for-kiosk-mode/">OSX Script for Kiosk Mode</a></p>
            <p>
              Next in
              <a href="/tag/Middleman.html">Middleman</a>
              <a href="/tag/Ruby.html">Ruby</a>
            </p>
            <p class='title'><a href="/adding-search-to-a-middleman-blog/">Adding search to a middleman blog</a></p>
          </div>
          <div class='prev'>
            <p>
              Previously in
              <a href="/tag/Chronological.html">Chronological</a>
              <a href="/tag/Overview.html">Overview</a>
            </p>
            <p class='title'><a href="/why-engineers-build-crappy-products/">Why Engineers build crappy products</a></p>
            <p>
              Previously in
              <a href="/tag/Middleman.html">Middleman</a>
            </p>
            <p class='title'><a href="/building-middleman-extensions/">Building Middleman Extensions</a></p>
            <p>
              Previously in
              <a href="/tag/Ruby.html">Ruby</a>
            </p>
            <p class='title'><a href="/setting-up-testing/">Setting up Rails testing with rspec, devise, and the gang</a></p>
            <p>
              Previously in
              <a href="/tag/Howto.html">Howto</a>
            </p>
            <p class='title'><a href="/setting-up-devise-with-twitter-and-facebook-and-other-omniauth-schemes-without-email-addresses/">Setting up Devise with Twitter and Facebook and other Omniauth schemes without email addresses</a></p>
          </div>
        </div>
      </div>
      <div class="row article_footer">
        <div class="comments">
            <a href="#" id="comment_shower">
              <span class="socicon socicon-disqus fgcolor"></span>
              <span class="disqus-comment-count" data-disqus-identifier="2015-05-08-slow-data-and-fast-sites.html">Be the first to comment.</span>
            </a>
        </div>
        <div class="sharing">
          <a href="http://www.twitter.com/share?url=http://willschenk.com//slow-data-and-fast-sites/&amp;text=Slow data and Fast Sites by @wschenk" title="Share this post on Twitter" data-lang="en" onclick="return !window.open(this.href, 'Twitter', 'width=640,height=300')"><span class="socicon socicon-twitter fgcolor"></span></a>
      
          <a target="_blank" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=300')" href="http://www.facebook.com/sharer/sharer.php?u=http://willschenk.com//slow-data-and-fast-sites/" title="Share this post on Facebook"><span class="socicon socicon-facebook fgcolor"></span></a>
      
          <a href="http://plus.google.com/share?url=http://willschenk.com//slow-data-and-fast-sites/" target="_blank" onclick="return !window.open(this.href, 'Google +', 'width=640,height=300')" title="Share this post on Google +"><span class="socicon socicon-google fgcolor"></span></a>
        </div>
      </div>
        <div class="comment_row">
          <div class="comment_universe">
            <div id="disqus_thread" class="col-sm-10 col-sm-offset-1"></div>
          </div>
        </div>
    </div>
    <footer class='academy'>
      <div class='container'>
        <div class='row'>
          <div class='logo'>
            <a href='http://academy.happyfuncorp.com/'>
              <img class="img-responsive" src="../images/academy-logo-f112afa1.png" />
            </a>
          </div>
          <div class='body'>
            <h1>Come join us in person!</h1>
            <p>HFC Technology Academy is dedicated to teaching people the skills they need to succeed in the world of technology and startups.</p>
            <p>The Academy is for anyone with the passion to learn about entrepreneurship, development, product management and other skills within the start-up community.</p>
            <h2><a href="http://academy.happyfuncorp.com/">Read about our free events</a></h2>
          </div>
        </div>
      </div>
    </footer>
    <footer class='footer  '>
      <div class='container'>
        <div class='row'>
          <div class='social'>
            <span>
              <a class='webicon twitter' href='http://twitter.com/wschenk'></a>
            </span>
            <span>
              <a class='webicon tumblr' href='http://sublimeguile.com/'></a>
            </span>
            <span>
              <a class='webicon instagram' href='http://instagram.com/wschenk'></a>
            </span>
            <span>
              <a class='webicon linkedin' href='http://www.linkedin.com/pub/will-schenk/0/266/420/'></a>
            </span>
            <span>
              <a class='webicon github' href='https://github.com/wschenk'></a>
            </span>
            <span>
              <a class='webicon rss' href='http://willschenk.com/feed.xml'></a>
            </span>
            <span>
              <a class='webicon mail' href='mailto:will@happyfuncorp.com'></a>
            </span>
          </div>
          <div class='made_in_bk'>
            <h3>Made in Brooklyn, NY</h3>
          </div>
        </div>
      </div>
    </footer>
    <script src="../javascripts/application-b5017286.js" type="text/javascript"></script><script src="../javascripts/modernizr-84a49412.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
    <script type="text/javascript">
      var _gaq=[['_setAccount','UA-56296045-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
    
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
      $(".article img").addClass( "img-responsive");
      $("iframe").map( function(e) {
        $(this).css( "max-width", $(this).width() );
        $(this).width( "100%" );
      });
      var _gaq=[['_setAccount','UA-56296045-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
      var disqus_shortname = 'willschenk';
        var disqus_identifier = '2015-05-08-slow-data-and-fast-sites.html';
            
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
  </body>
</html>
