<!doctype html><html><head><title>Building Middleman Extensions</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="Building Middleman Extensions"><meta property="og:description" content="Middleman extensions, like rails plugins, are packaged as gems. There are three main ways to extend middleman. You can add helpers, add middleman commands, or extend the sitemap generation in someway. Lets go through those in detail.
Creating the extension Create a gem using bundle gem _name_
$ bundle gem middleman-graphviz Add middleman-core to your gem dependancies in the .gemspec file:
spec.add_runtime_dependency 'middleman-core', ['>= 3.0.0'] Register your extension into middleman. Our gem will be activated in the sites config."><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2014/building-middleman-extensions/"><meta property="article:published_time" content="2014-12-17T00:00:00+00:00"><meta property="article:modified_time" content="2014-12-17T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building Middleman Extensions"><meta name=twitter:description content="Middleman extensions, like rails plugins, are packaged as gems. There are three main ways to extend middleman. You can add helpers, add middleman commands, or extend the sitemap generation in someway. Lets go through those in detail.
Creating the extension Create a gem using bundle gem _name_
$ bundle gem middleman-graphviz Add middleman-core to your gem dependancies in the .gemspec file:
spec.add_runtime_dependency 'middleman-core', ['>= 3.0.0'] Register your extension into middleman. Our gem will be activated in the sites config."><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>Building Middleman Extensions</h1><h2 class="font-weight-light font-italic mb-3">make middleman more awesome</h2><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2014/building-middleman-extensions/>Published December 17, 2014</a>
<a class=text-muted href=../../../tags/middleman>#middleman</a>
<a class=text-muted href=../../../tags/howto>#howto</a>
<a class=text-muted href=../../../tags/ruby>#ruby</a></p><div class="alert alert-danger">This article was published a while ago and may contain obsolete information!</div><article class="article mt-5"><p>Middleman extensions, like rails plugins, are packaged as gems. There are three main ways to extend middleman. You can add helpers, add middleman commands, or extend the sitemap generation in someway. Lets go through those in detail.</p><h2 id=creating-the-extension>Creating the extension</h2><p>Create a gem using <code>bundle gem _name_</code></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ bundle gem middleman-graphviz
</code></pre></div><p>Add <code>middleman-core</code> to your gem dependancies in the <code>.gemspec</code> file:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby>  <span class=n>spec</span><span class=o>.</span><span class=n>add_runtime_dependency</span>     <span class=s1>&#39;middleman-core&#39;</span><span class=p>,</span> <span class=o>[</span><span class=s1>&#39;&gt;= 3.0.0&#39;</span><span class=o>]</span>
</code></pre></div><p>Register your extension into middleman. Our gem will be activated in the sites <code>config.rb</code> using <code>activate :graphviz</code> and this is how middleman knows what to load. <code>lib/middleman/graphviz.rb</code>:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=nb>require</span> <span class=s1>&#39;middleman-core&#39;</span>
<span class=nb>require</span> <span class=s2>&#34;middleman/graphviz/version&#34;</span>
<span class=nb>require</span> <span class=s2>&#34;middleman/graphviz/extension&#34;</span>

<span class=o>::</span><span class=no>Middleman</span><span class=o>::</span><span class=no>Extensions</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=ss>:graphviz</span><span class=p>,</span> <span class=o>::</span><span class=no>Middleman</span><span class=o>::</span><span class=no>Graphviz</span><span class=o>::</span><span class=no>Extension</span> <span class=p>)</span>
</code></pre></div><p><em>Replace with your gem name!</em></p><p>Write the code that actually plugs into middleman. The we are going to add some helpers to the site, so let&rsquo;s register them here. Create <code>lib/middleman/graphviz/extension.rb</code></p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=nb>require</span> <span class=s1>&#39;middleman/graphviz/helpers&#39;</span>

<span class=k>module</span> <span class=nn>Middleman</span>
  <span class=k>module</span> <span class=nn>Graphviz</span>
    <span class=k>class</span> <span class=nc>Extension</span> <span class=o>&lt;</span> <span class=no>Middleman</span><span class=o>::</span><span class=no>Extension</span>
      <span class=k>def</span> <span class=nf>initialize</span><span class=p>(</span> <span class=n>app</span><span class=p>,</span> <span class=n>options_hash</span> <span class=o>=</span> <span class=p>{},</span> <span class=o>&amp;</span><span class=n>block</span><span class=p>)</span>
        <span class=k>super</span>

        <span class=n>app</span><span class=o>.</span><span class=n>helpers</span> <span class=no>Middleman</span><span class=o>::</span><span class=no>Graphviz</span><span class=o>::</span><span class=no>Helpers</span>
      <span class=k>end</span>
    <span class=k>end</span>
  <span class=k>end</span>
<span class=k>end</span>
</code></pre></div><p><em>Replace with your gem name!</em></p><h2 id=writing-helpers>Writing helpers</h2><p>Lets create a basic helper method now in the file <code>lib/middleman/graphviz/helpers.rb</code>. This is going to accept one parameter and a block. We are going to get the content of that block and then spit it back directly for now.</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=k>module</span> <span class=nn>Middleman</span>
  <span class=k>module</span> <span class=nn>Graphviz</span>
    <span class=k>module</span> <span class=nn>Helpers</span>
      <span class=k>def</span> <span class=nf>basic_helper_example</span><span class=p>(</span> <span class=n>param</span> <span class=p>)</span>
        <span class=s2>&#34;&lt;h1&gt;</span><span class=si>#{</span><span class=n>param</span><span class=si>}</span><span class=s2>&lt;/h1&gt;&#34;</span><span class=o>.</span><span class=n>html_safe</span>
      <span class=k>end</span>

      <span class=k>def</span> <span class=nf>block_helper_example</span><span class=p>(</span> <span class=n>type</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>block</span> <span class=p>)</span>
        <span class=k>if</span> <span class=nb>block_given?</span>
          <span class=n>data</span> <span class=o>=</span> <span class=n>capture_html</span><span class=p>(</span><span class=o>&amp;</span><span class=n>block</span><span class=p>)</span>

          <span class=n>data</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>upcase</span>

          <span class=n>concat_content</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>html_safe</span><span class=p>)</span>
        <span class=k>end</span>
      <span class=k>end</span>
    <span class=k>end</span>
  <span class=k>end</span>
<span class=k>end</span>
</code></pre></div><p>These can be used like</p><pre><code class=language-erb data-lang=erb>&lt;%%= basic_helper_example( &quot;My Title&quot;) %&gt;
</code></pre><p>or as a block</p><pre><code class=language-erb data-lang=erb>&lt;%% block_helper( &quot;My Title&quot;) do %&gt;
  This is going to be in upcase
&lt;%% end %%&gt;
</code></pre><h2 id=add-it-to-an-active-middleman-project>Add it to an active middleman project</h2><p>Have bundler reference this new gem inside of an existing middleman project. <code>Gemfile</code>:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=n>gem</span> <span class=s2>&#34;middleman-graphviz&#34;</span><span class=p>,</span> <span class=ss>path</span><span class=p>:</span> <span class=s2>&#34;../middleman-graphviz&#34;</span>
</code></pre></div><p>Inside of the middleman project&rsquo;s <code>config.rb</code> activate it:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=n>activate</span> <span class=ss>:graphviz</span>
</code></pre></div><p>Now startup the middleman server, and use your helper in the page! Note that, just like when you use a helper defined in <code>config.rb</code> you need to restart <code>middleman server</code> to see your change take effect.</p><h2 id=adding-configuration-to-your-extension>Adding configuration to your extension</h2><p>If you want to include configurable options in your extension, here&rsquo;s some skeleton code for <code>extension.rb</code>:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=nb>require</span> <span class=s1>&#39;middleman/graphviz/helpers&#39;</span>

<span class=k>module</span> <span class=nn>Middleman</span>
  <span class=k>module</span> <span class=nn>Graphviz</span>
    <span class=n>cattr_accessor</span> <span class=ss>:options</span>

    <span class=k>class</span> <span class=nc>Extension</span> <span class=o>&lt;</span> <span class=no>Middleman</span><span class=o>::</span><span class=no>Extension</span>
      <span class=k>def</span> <span class=nf>initialize</span><span class=p>(</span> <span class=n>app</span><span class=p>,</span> <span class=n>options_hash</span> <span class=o>=</span> <span class=p>{},</span> <span class=o>&amp;</span><span class=n>block</span><span class=p>)</span>
        <span class=k>super</span>

        <span class=n>app</span><span class=o>.</span><span class=n>helpers</span> <span class=no>Middleman</span><span class=o>::</span><span class=no>Graphviz</span><span class=o>::</span><span class=no>Helpers</span>
      <span class=k>end</span>

      <span class=k>def</span> <span class=nf>registered</span><span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=n>options_hash</span> <span class=o>=</span> <span class=p>{},</span> <span class=o>&amp;</span><span class=n>block</span><span class=p>)</span>
        <span class=n>options</span> <span class=o>=</span> <span class=no>Options</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>options_hash</span><span class=p>)</span>
        <span class=k>yield</span> <span class=n>options</span> <span class=k>if</span> <span class=nb>block_given?</span>

        <span class=c1># Default options for the rsync method.</span>
        <span class=n>options</span><span class=o>.</span><span class=n>theme</span> <span class=o>||=</span> <span class=s2>&#34;default&#34;</span>
        <span class=n>options</span><span class=o>.</span><span class=n>generate_file</span> <span class=o>||=</span> <span class=kp>false</span>

        <span class=o>::</span><span class=no>Middleman</span><span class=o>::</span><span class=no>Graphviz</span><span class=o>.</span><span class=n>options</span> <span class=o>=</span> <span class=n>options</span>

        <span class=n>app</span><span class=o>.</span><span class=n>helpers</span> <span class=no>Middleman</span><span class=o>::</span><span class=no>Graphviz</span><span class=o>::</span><span class=no>Helpers</span>
      <span class=k>end</span>

      <span class=k>def</span> <span class=nf>after_configuration</span>
        <span class=nb>puts</span> <span class=s2>&#34;After configuration&#34;</span>
      <span class=k>end</span>
    <span class=k>end</span>

    <span class=k>module</span> <span class=nn>Helpers</span>
      <span class=k>def</span> <span class=nf>options</span>
        <span class=o>::</span><span class=no>Middleman</span><span class=o>::</span><span class=no>Graphviz</span><span class=o>.</span><span class=n>options</span>
      <span class=k>end</span>
    <span class=k>end</span>
  <span class=k>end</span>
<span class=k>end</span>
</code></pre></div><h2 id=adding-additional-middleman-commands>Adding additional middleman commands</h2><p>The middleman command is built on <a href=../../../making-a-command-line-utility-with-gems-and-thor>thor</a>, which as we know is awesome. To add a command to the middleman, use the following template for each <code>command.rb</code>:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=nb>require</span> <span class=s1>&#39;middleman-core/cli&#39;</span>

<span class=k>module</span> <span class=nn>Middleman</span>
  <span class=k>module</span> <span class=nn>Cli</span>
    <span class=c1># This class provides a &#34;deploy&#34; command for the middleman CLI.</span>
    <span class=k>class</span> <span class=nc>Graphviz</span> <span class=o>&lt;</span> <span class=no>Thor</span>
      <span class=kp>include</span> <span class=no>Thor</span><span class=o>::</span><span class=no>Actions</span>

      <span class=n>check_unknown_options!</span>

      <span class=n>namespace</span> <span class=ss>:graphviz</span>

      <span class=c1># Tell Thor to exit with a nonzero exit code on failure</span>
      <span class=k>def</span> <span class=nc>self</span><span class=o>.</span><span class=nf>exit_on_failure?</span>
        <span class=kp>true</span>
      <span class=k>end</span>

      <span class=n>desc</span> <span class=s1>&#39;graphviz [options]&#39;</span><span class=p>,</span> <span class=s1>&#39;Run this amazing command&#39;</span>
      <span class=n>method_option</span> <span class=s1>&#39;clean&#39;</span><span class=p>,</span>
        <span class=ss>type</span><span class=p>:</span> <span class=ss>:boolean</span><span class=p>,</span>
        <span class=ss>aliases</span><span class=p>:</span> <span class=s1>&#39;-c&#39;</span><span class=p>,</span>
        <span class=ss>desc</span><span class=p>:</span> <span class=s1>&#39;Clean all the build files&#39;</span>
      <span class=k>def</span> <span class=nf>graphviz</span>
        <span class=vi>@shared_instance</span> <span class=o>=</span> <span class=o>::</span><span class=no>Middleman</span><span class=o>::</span><span class=no>Application</span><span class=o>.</span><span class=n>server</span><span class=o>.</span><span class=n>inst</span>

        <span class=nb>puts</span> <span class=s2>&#34;Running my command&#34;</span>
      <span class=k>end</span>
    <span class=k>end</span>
  <span class=k>end</span>
<span class=k>end</span>
</code></pre></div><p>Then, inside of <code>middleman/graphviz.rb</code> simply <code>require 'middleman/graphviz/command'</code>.</p><p>The <a href=http://www.rubydoc.info/github/wycats/thor/Thor/Actions><code>Thor::Actions</code></a> class gives you access to many different helper commands that make it easy to move, filter, template, and otherwise mangle files, and of course you have access to the full middleman app.</p><h2 id=manipulating-the-sitemap>Manipulating the sitemap</h2><p>The most awesomest way to extend middleman is by modifying the sitemap. This lets us create whole new URLs that are derived and generated from other sources. This is how the <a href=https://github.com/middleman/middleman-blog>middleman-blog</a> extension really works, and if you want to start an indepth exploration that&rsquo;s a good place to start spelunking.</p><p>Lets build an extesion that creates pages from an external datasource. In this case, a CSV file, but you could imagine having this come out of a database instead. This lets us manipulate the sitemap of the site it&rsquo;s been created, and will let us add and remove different pages based upon what middleman knows about the site.</p><p>First we add an <code>after_configuration</code> handler to <code>Middleman::Graphviz::Extension</code> to register our class as a <code>resource_list_manipulator</code>:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby>  <span class=k>def</span> <span class=nf>after_configuration</span>
    <span class=vi>@csv_pages</span> <span class=o>=</span> <span class=no>Middleman</span><span class=o>::</span><span class=no>CSV</span><span class=o>::</span><span class=no>Page</span><span class=o>.</span><span class=n>new</span><span class=p>(</span> <span class=vi>@app</span><span class=p>,</span> <span class=nb>self</span> <span class=p>)</span>
    <span class=vi>@app</span><span class=o>.</span><span class=n>sitemap</span><span class=o>.</span><span class=n>register_resource_list_manipulator</span><span class=p>(</span><span class=ss>:&#34;csv_pages&#34;</span><span class=p>,</span> <span class=vi>@csv_pages</span><span class=p>,</span> <span class=kp>false</span><span class=p>)</span>
  <span class=k>end</span>
</code></pre></div><p>Then we create <code>lib/middleman/csv/page.rb</code>.</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=nb>require</span> <span class=s1>&#39;csv&#39;</span>

<span class=k>module</span> <span class=nn>Middleman</span>
  <span class=k>module</span> <span class=nn>CSV</span>
    <span class=k>class</span> <span class=nc>Page</span>
      <span class=c1># include UriTemplates</span>

      <span class=k>def</span> <span class=nf>initialize</span><span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=n>controller</span><span class=p>)</span>
        <span class=vi>@sitemap</span> <span class=o>=</span> <span class=n>app</span><span class=o>.</span><span class=n>sitemap</span>
        <span class=vi>@page_link_template</span> <span class=o>=</span> <span class=s2>&#34;pages/{page}.html&#34;</span>
        <span class=vi>@page_template</span> <span class=o>=</span> <span class=s2>&#34;page.html&#34;</span>
        <span class=n>app</span><span class=o>.</span><span class=n>ignore</span> <span class=vi>@page_template</span>
      <span class=k>end</span>

      <span class=c1># Update the main sitemap resource list</span>
      <span class=c1># @return [void]</span>
      <span class=k>def</span> <span class=nf>manipulate_resource_list</span><span class=p>(</span><span class=n>resources</span><span class=p>)</span>
        <span class=n>resources</span> <span class=o>+</span> <span class=o>::</span><span class=no>CSV</span><span class=o>.</span><span class=n>open</span><span class=p>(</span> <span class=s2>&#34;pages.csv&#34;</span> <span class=p>)</span><span class=o>.</span><span class=n>collect</span> <span class=k>do</span> <span class=o>|</span><span class=n>row</span><span class=o>|</span>
          <span class=n>create_page_resource</span><span class=p>(</span> <span class=n>row</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>,</span> <span class=n>row</span> <span class=p>)</span>
        <span class=k>end</span>
      <span class=k>end</span>

      <span class=kp>private</span>

      <span class=k>def</span> <span class=nf>link</span><span class=p>(</span><span class=n>page</span><span class=p>)</span>
        <span class=o>::</span><span class=no>Middleman</span><span class=o>::</span><span class=no>Util</span><span class=o>.</span><span class=n>normalize_path</span> <span class=vi>@page_link_template</span><span class=o>.</span><span class=n>gsub</span><span class=p>(</span> <span class=sr>/\{page\}/</span><span class=p>,</span> <span class=n>page</span> <span class=p>)</span>
      <span class=k>end</span>

      <span class=k>def</span> <span class=nf>create_page_resource</span><span class=p>(</span> <span class=n>page</span><span class=p>,</span> <span class=n>row</span> <span class=p>)</span>
        <span class=no>Sitemap</span><span class=o>::</span><span class=no>Resource</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=vi>@sitemap</span><span class=p>,</span> <span class=n>link</span><span class=p>(</span><span class=n>page</span><span class=p>))</span><span class=o>.</span><span class=n>tap</span> <span class=k>do</span> <span class=o>|</span><span class=nb>p</span><span class=o>|</span>
          <span class=nb>p</span><span class=o>.</span><span class=n>proxy_to</span><span class=p>(</span> <span class=vi>@page_template</span> <span class=p>)</span>

          <span class=nb>p</span><span class=o>.</span><span class=n>add_metadata</span> <span class=ss>locals</span><span class=p>:</span> <span class=p>{</span>
            <span class=ss>row</span><span class=p>:</span> <span class=n>row</span>
          <span class=p>}</span>
        <span class=k>end</span>
      <span class=k>end</span>
    <span class=k>end</span>
  <span class=k>end</span>
<span class=k>end</span>
</code></pre></div><p>When <code>initialized</code> is called, we are grabbing references to the middleman app. We&rsquo;ve hard coded two things in this example that should be from the options, the page name template, and the page template itself. Since the <code>page.html</code> isn&rsquo;t meant to be standalone, we tell middleman to ignore it in the sitemap with <code>app.ignore @page_template</code>.</p><p>When <code>manipulate_resource_list</code> is called it is passed a list of resources that middleman currently knows about. We return a new list of resources based on that list. What we are doing in this example is loading up the list of pages from a file called <code>pages.csv</code>, creating new pages based on that, and then returning the new list.</p><p>This example is contrived and we are loading in the list of pages from the filesystem. At this point in the rendering process we do have access to all of the pages, instead of loading up a file you could inspect the site map, go through all of the pages and make additional pages for subsets of those. The <code>middleman-blog</code> does this for both <code>tag</code> pages and <code>calendar</code> pages. Instead of calling <code>::CSV.open</code> it goes through all of the pages on the site and collects a dynamic list of pages based upon the metatag, either <code>tag</code> or published dates.</p><p>Then we create the entries in the sitemap themselves. These first get proxied to our page template. Then we set the metadata of the particular page to be what we loaded in from the file.</p><p>Here&rsquo;s an example template <code>page.html.haml</code>:</p><pre><code class=language-haml data-lang=haml>%h1= row[1]
= row[0]
</code></pre><p>This example is equivelent to looping over a file in <code>config.rb</code> and setting up page proxies there. However in that case we don&rsquo;t have access to the sitemap overall, so we couldn&rsquo;t generate a dynamic list of new pages based upon existing pages. With this extension we can insert ourselves into the rendering process and add the <em>awesome</em>.</p><h2 id=conclusion>Conclusion</h2><p>Building these extensions is a very complicated way to achive things that would be simplier if you just build the site in rails and had a database with you at runtime. But it works, and you can achieve plug into the rendering process to create a more <em>dynamic</em> static site. Helpers are by far the easiest way to package things together, and as you can see from the example I&rsquo;m working through I&rsquo;m working on an easy way to integrate Graphviz images in middleman documents without a seperate workflow. (<em>Coming soon.</em>)</p><p>Middleman CLI commands are also easy to build, though here you do start to need to know more about how the internals of how middleman is setup. Things like the <code>middleman-deploy</code> gem are pretty amazing and can really help with the overall publishing workflow.</p><p>And sitemap manipulation is the most powerful, which lets you recreate pages based upon site and page metadata that is collected throughout the process. The entire <code>middleman-blog</code> extention is build using this functionality.</p><p>Happy building!</p></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center">Next Post:
<a href=../../../articles/2014/using-rake-for-dataflow-programming-and-data-science/>Using rake for dataflow programming and data science</a></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2014/middleman-tricks-and-hacks/>Middleman Tricks and Hacks</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2014/middleman-tricks-and-hacks/>Middleman Tricks and Hacks</a></p><p class="lead font-italic mb-0">specific tricks I used to build this site</p><div class="font-weight-light mt-3"><p>As part of the process of getting this site to work, I learned some more things about how to better build a site with middleman. Building off of our foundational article here are a few other things that I found very useful when using middleman to build a static site with a bunch of dynamically generated content.
Partials The index.html.haml, articles.html.haml, tag.html.haml and calendar.html.haml pages all use the same partial to list out the post archives, which are mostly the same.</p></div><a href=../../../articles/2014/middleman-tricks-and-hacks/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2014/building-sites-with-middleman/>Building Sites with Middleman</a></p><p class="lead font-italic mb-0">lean publishing</p><div class="font-weight-light mt-3"><p>I make a lot of websites, and I have a certain toolkit that I use to build them. The most useful things I use are:
layouts and partials so I only need to set things up once haml for writing html, since I don&rsquo;t like closing tags Bootstrap and sass for writing css Markdown for formatting large blogs of content coffeescript for JavaScript Middleman is a static site generator, which means that it takes a bunch of source files, does some stuff with it, and produces static HTML, CSS, Images, and Javascript that can be hosted on a basic server somewhere, including hosting on S3 or Github Pages so you don&rsquo;t need to consider a server.</p></div><a href=../../../articles/2014/building-sites-with-middleman/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2014/dateslice-writing-rails-extensions/>Dateslice: Writing rails extensions</a></p><p class="lead font-italic mb-0">adding date group_by to ActiveRecord</p><div class="font-weight-light mt-3"><p>Ruby on Rails is a very modular framework since the merging with Merb in 2008. The opinionated conventions are implemented under using techniques that let you jump in and build your own components, picking and choosing different parts that let you build Rails apps in the same straightforward way you would if using the official modules.
Let&rsquo;s go through the dateslices gem which I wrote to extend active record so that we could better interact with the group by sql command when dealing with dates.</p></div><a href=../../../articles/2014/dateslice-writing-rails-extensions/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>