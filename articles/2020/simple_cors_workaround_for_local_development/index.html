<!doctype html><html><head><title>Simple CORS workaround for local development</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="Simple CORS workaround for local development"><meta property="og:description" content="I've been doing a lot of web development old school, just editing HTML and JavaScript by hand without a build environment. Running npx live-server is an easy one liner to spin up a server, that opens a browser for you and also updates changes on safe.  Sometimes that's not enough. Often you want to pull in data from an API, and that requires HTTPS, and also you need to work around CORS limitations."><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2020/simple_cors_workaround_for_local_development/"><meta property="article:published_time" content="2020-06-15T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Simple CORS workaround for local development"><meta name=twitter:description content="I've been doing a lot of web development old school, just editing HTML and JavaScript by hand without a build environment. Running npx live-server is an easy one liner to spin up a server, that opens a browser for you and also updates changes on safe.  Sometimes that's not enough. Often you want to pull in data from an API, and that requires HTTPS, and also you need to work around CORS limitations."><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>Simple CORS workaround for local development</h1><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2020/simple_cors_workaround_for_local_development/>Published June 15, 2020</a>
<a class=text-muted href=../../../tags/howto>#howto,</a>
<a class=text-muted href=../../../tags/javascript>#javascript,</a>
<a class=text-muted href=../../../tags/cors>#cors,</a>
<a class=text-muted href=../../../tags/static_sites>#static_sites</a></p><article class="article mt-5"><p>I've been doing a lot of web development old school, just editing HTML and JavaScript by hand without a build environment. Running <code class=verbatim>npx live-server</code> is an easy one liner to spin up a server, that opens a browser for you and also updates changes on safe.</p><p>Sometimes that's not enough. Often you want to pull in data from an API, and that requires HTTPS, and also you need to work around CORS limitations. Here's a simple way to do that.</p><ol><li><p>First create a local certificate in <code class=verbatim>/tmp</code> if it's not there</p></li><li><p>Run <code class=verbatim>http-server</code></p></li></ol><table class="table table-striped"><thead><tr><th>Option</th><th>Reason</th></tr></thead><tbody><tr><td><code class=verbatim>--cors</code></td><td>Enable CORS via the Access-Control-Allow-Origin header</td></tr><tr><td><code class=verbatim>-S</code></td><td>Enable https</td></tr><tr><td><code class=verbatim>-P</code></td><td>Proxy unhandled requests to <code class=verbatim>https://tezlabapp.com</code></td></tr><tr><td><code class=verbatim>-c-1</code></td><td>Turn off caching</td></tr><tr><td><code class=verbatim>-C /tmp/cert.pem</code></td><td>Certificate file</td></tr><tr><td><code class=verbatim>-K /tmp/key.pem</code></td><td>Key file</td></tr></tbody></table><p>Here's something you can stick in your path to run it.</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=cp>#!/bin/bash
</span><span class=cp></span><span class=k>if</span> <span class=o>[</span> ! -f /tmp/key.pem <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
  <span class=nb>echo</span> Creating key
  openssl req -newkey rsa:2048 -new -nodes -x509 -days <span class=m>3650</span> -keyout /tmp/key.pem -out /tmp/cert.pem -batch
<span class=k>fi</span>

npx http-server --cors -S -P https://tezlabapp.com -c-1 -C /tmp/cert.pem -K /tmp/key.pem</code></pre></div></div></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center">Next Post:
<a href=../../../articles/2020/developing_react_inside_docker/>Developing React Inside Docker</a></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2020/beginning_emacs/>Beginning Emacs</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2020/beginning_emacs/>Beginning Emacs</a></p><p class="lead font-italic mb-0">Rediscovering emacs</p><div class="font-weight-light mt-3"><p>Intro I've been dipping back ito the world of free software, and have been having a huge amount of fun getting back into emacs. I'm using it more of an operating system than I ever did before, as a way to navigate the world using a text interface. I'd never thought I'd be done with the terminal, but this is the first time that I've got something better and more powerful.</p></div><a href=../../../articles/2020/beginning_emacs/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2020/making_charts_with_vuejs_and_no_tooling/>Making charts with VueJS and no tooling</a></p><p class="lead font-italic mb-0">Static files all the way</p><div class="font-weight-light mt-3"><p>I learned most of what I know about coding by looking at source code &ndash; especially view source on a web browser. Lets see if we can bring that era back a bit by using ES modules and eschewing webpack and other bundling systems. We will use the amazing unpkg.com CDN to get our building blocks to assemble together.
First get vue working From unpkg we will link to tailwindcss in the head tag, and then import vuejs from using a script type="module" tag.</p></div><a href=../../../articles/2020/making_charts_with_vuejs_and_no_tooling/ class="btn btn-primary">Read more</a></div><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2019/setting_up_an_ipfs_node/>Setting up an IPFS Node</a></p><p class="lead font-italic mb-0">using docker-compose and certbot</p><div class="font-weight-light mt-3"><p>IPFS nodes that run in the broswer communicate over websockets to the main network. Lets walk through how to setup a IPFS server that your browser code can connect to in addition to the public gateways. Strategy Wire everything up with docker-compose Create and configure an ipfs container Setup nginx with dummy certificate Replace that certificate with certbot Setup certbot to auto renew the certificates Requirements You will need: A server with a domain or subdomain to use certbot to get a certificate A working docker-compose install I'm using a prebuilt docker image on Digital Ocean but the key part is to get the domain name.</p></div><a href=../../../articles/2019/setting_up_an_ipfs_node/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>