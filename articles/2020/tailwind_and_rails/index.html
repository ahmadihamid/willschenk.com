<!doctype html><html><head><title>Tailwind and Rails</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=../../../css/syntax.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56296045-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script async defer data-domain=willschenk.com src=https://plausible.io/js/plausible.js></script><meta property="og:title" content="Tailwind and Rails"><meta property="og:description" content="Tailwind is a really nice set of CSS utility classes that let you style up a page staying largely in one file at a time. Rails has it's own wild way of dealing with javascript, so lets go through how to make them play well together. Install tailwindcss   Make sure that you have node 12.13 or higher: node -v   If not, then upgrade node.  Inside of your rails project, install tailwind."><meta property="og:type" content="article"><meta property="og:url" content="https://willschenk.com/articles/2020/tailwind_and_rails/"><meta property="article:published_time" content="2020-11-18T00:00:00+00:00"><meta property="article:modified_time" content="2020-11-18T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tailwind and Rails"><meta name=twitter:description content="Tailwind is a really nice set of CSS utility classes that let you style up a page staying largely in one file at a time. Rails has it's own wild way of dealing with javascript, so lets go through how to make them play well together. Install tailwindcss   Make sure that you have node 12.13 or higher: node -v   If not, then upgrade node.  Inside of your rails project, install tailwind."><meta name=twitter:site content="@wschenk"><style>.article p,.article ul,.article ol,.article table{max-width:45em}.article pre p{max-width:none;margin-top:-1.5rem}article.article p:first-child,.article blockquote{font-size:1.25em;font-weight:300;max-width:36em}.half-height-scroll{max-height:32em;overflow:scroll}</style></head><body><nav class="container my-5"><h1 class="pt-md-5 display-3"><a class=text-dark href=../../../>Will Schenk</a></h1><p><a class="text-dark h4 mr-3 font-weight-light" href=../../../articles/>Articles</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../contact>Contact</a>
<a class="text-dark h4 mr-3 font-weight-light" href=../../../tags/>Tags</a>
<a href=../../../feed.xml class="mr-3 h4 text-light"><img src=../../../img/rss.svg alt=rss height=20 width=20></a>
<a href=https://twitter.com/@wschenk class="mr-3 h4 text-light"><img src=../../../img/twitter.svg alt=twitter height=20 width=20></a>
<a href=https://instagram.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/instagram.svg alt=instagram height=20 width=20></a>
<a href=https://github.com/wschenk class="mr-3 h4 text-light"><img src=../../../img/github.svg alt=github height=20 width=20></a>
<a href=https://linkedin.com/in/will-schenk-420266 class="mr-3 h4 text-light"><img src=../../../img/linkedin.svg alt=linkedin height=20 width=20></a></p></nav><div class=container><h1 class=mt-5>Tailwind and Rails</h1><h2 class="font-weight-light font-italic mb-3">postcss setup</h2><p class="text-muted mt-3"><a class=text-muted href=https://willschenk.com/articles/2020/tailwind_and_rails/>Published November 18, 2020</a>
<a class=text-muted href=../../../tags/rails>#rails,</a>
<a class=text-muted href=../../../tags/tailwind>#tailwind,</a>
<a class=text-muted href=../../../tags/postcss>#postcss</a></p><article class="article mt-5"><p>Tailwind is a really nice set of CSS utility classes that let you
style up a page staying largely in one file at a time. Rails has it's
own wild way of dealing with javascript, so lets go through how to
make them play well together.</p><h2 id=headline-1>Install tailwindcss</h2><p>Make sure that you have node 12.13 or higher:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>node -v</code></pre></div></div><p>If not, then upgrade node.</p><p>Inside of your rails project, install <code class=verbatim>tailwind</code>. We need to use the
<a href=https://tailwindcss.com/docs/installation#post-css-7-compatibility-build>PostCSS 7 compatibility build</a> at this time since not all of our
plugins are updated.</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>yarn add tailwindcss@npm:@tailwindcss/postcss7-compat postcss@^7 autoprefixer@^9</code></pre></div></div><p>Then we create a directory <code class=verbatim>app/javascript/stylesheets</code> that we will
have tailwind use. Create a file
<code class=verbatim>app/javascript/stylesheets/application.scss</code> and import the tailwind
components. If you need to extract and apply different components you
can do it here.</p><div class="src src-css"><div class=highlight><pre class=chroma><code class=language-css data-lang=css><span class=p>@</span><span class=k>import</span> <span class=s2>&#34;tailwindcss/base&#34;</span><span class=p>;</span>
<span class=p>@</span><span class=k>import</span> <span class=s2>&#34;tailwindcss/components&#34;</span><span class=p>;</span>

<span class=o>//</span> <span class=nt>You</span> <span class=nt>can</span> <span class=nt>add</span> <span class=nt>your</span> <span class=nt>own</span> <span class=nt>custom</span> <span class=nt>components</span><span class=o>/</span><span class=nt>styles</span> <span class=nt>here</span>

<span class=p>@</span><span class=k>import</span> <span class=s2>&#34;tailwindcss/utilities&#34;</span><span class=p>;</span></code></pre></div></div><p>Finally, we need to add <code class=verbatim>tailwindcss</code> to the <code class=verbatim>postcss</code> pipeline. In <code class=verbatim>postcss.config.js</code>:</p><div class="src src-javascript"><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
        <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;tailwindcss&#39;</span><span class=p>),</span>
        <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;autoprefixer&#39;</span><span class=p>),</span>
        <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;postcss-import&#39;</span><span class=p>),</span>
        <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;postcss-flexbugs-fixes&#39;</span><span class=p>),</span>
        <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;postcss-preset-env&#39;</span><span class=p>)({</span>
            <span class=nx>autoprefixer</span><span class=o>:</span> <span class=p>{</span>
                <span class=nx>flexbox</span><span class=o>:</span> <span class=s1>&#39;no-2009&#39;</span>
            <span class=p>},</span>
            <span class=nx>stage</span><span class=o>:</span> <span class=mi>3</span>
        <span class=p>})</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></div></div><h2 id=headline-2>Configuring webpacker</h2><p>First we need to tell <code class=verbatim>app/javascript/packs/application.js</code> to use the
new sass sheet:</p><div class="src src-javascript"><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// Put this at the end
</span><span class=c1></span><span class=nx>require</span><span class=p>(</span><span class=s2>&#34;stylesheets/application.scss&#34;</span><span class=p>)</span>
</code></pre></div></div><p>And then add the <code class=verbatim>stylesheet_pack_tag</code> to your layout</p><p>In <code class=verbatim>app/views/layouts/application.html.erb</code>:</p><div class="src src-html"><div class=highlight><pre class=chroma><code class=language-html data-lang=html>        <span class=c>&lt;!-- This refers to app/javascript/stylesheets/application.scss--&gt;</span>
        <span class=err>&lt;</span>%= stylesheet_pack_tag &#39;application&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;</code></pre></div></div><p>And then update the <code class=verbatim>body</code> style with a little tailwind goodness, so we can test it out:</p><div class="src src-html"><div class=highlight><pre class=chroma><code class=language-html data-lang=html>    <span class=p>&lt;</span><span class=nt>body</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-gray-100 text-white-900 w-3/4 mx-auto p-4&#34;</span><span class=p>&gt;</span></code></pre></div></div><p>Which we can do by creating a simple route:</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>rails g controller home index</code></pre></div></div><p>And in <code class=verbatim>config/routes.rb</code> add a</p><p>Which will let you see the generated javascript in real life by
starting up rails and going to <a href=http://localhost:3000>http://localhost:3000</a></p><h2 id=headline-3>Setting up production purging</h2><p>We're going to <a href=https://tailwindcss.com/docs/controlling-file-size>follow tailwind purgecss directions</a> and create a
<code class=verbatim>tailwind.config.js</code> file.</p><div class="src src-javascript"><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>purge</span><span class=o>:</span> <span class=p>[</span>
    <span class=s1>&#39;./app/**/*.html&#39;</span><span class=p>,</span>
    <span class=s1>&#39;./app/**/*.erb&#39;</span><span class=p>,</span>
    <span class=s1>&#39;./app/**/*.vue&#39;</span><span class=p>,</span>
    <span class=s1>&#39;./app/**/*.jsx&#39;</span><span class=p>,</span>
  <span class=p>],</span>
  <span class=nx>theme</span><span class=o>:</span> <span class=p>{},</span>
  <span class=nx>variants</span><span class=o>:</span> <span class=p>{},</span>
  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[],</span>
<span class=p>}</span>
</code></pre></div></div><p>Add in any additional filetypes depending upon which templating system
you are using.</p><h2 id=headline-4>Customizing the theme</h2><p>Tailwind has a lot of ways to <a href=https://tailwindcss.com/docs/theme>change the theme</a>, but lets walk through how to add a different font for the site.</p><p>First we'll add a font via npm, from the <a href=https://fontsource.github.io/search-directory>fontsource</a> project.</p><div class="src src-bash"><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>yarn add fontsource-dosis</code></pre></div></div><p>Then, we need to tell webpacker to include it, which is driven off of
<code class=verbatim>app/assets/javascripts/pack/application.js</code>. Add the required require:</p><div class="src src-javascript"><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fontsource-dosis&#39;</span><span class=p>)</span>
</code></pre></div></div><p>Then we are need to tell <code class=verbatim>tailwind</code> to use this new font. First we import the default theme, and then we'll add our new <code class=verbatim>fontFamily</code> to the front:</p><div class="src src-javascript"><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=kr>const</span> <span class=nx>defaultTheme</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;tailwindcss/defaultTheme&#34;</span><span class=p>);</span>

<span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>purge</span><span class=o>:</span> <span class=p>{</span>
         <span class=nx>content</span><span class=o>:</span> <span class=p>[</span>
            <span class=s1>&#39;./app/**/*.html&#39;</span><span class=p>,</span>
            <span class=s1>&#39;./app/**/*.erb&#39;</span><span class=p>,</span>
            <span class=s1>&#39;./app/**/*.vue&#39;</span><span class=p>,</span>
            <span class=s1>&#39;./app/**/*.jsx&#39;</span><span class=p>,</span>
        <span class=p>]},</span>
    <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>extend</span><span class=o>:</span> <span class=p>{</span>
            <span class=nx>fontFamily</span><span class=o>:</span> <span class=p>{</span>
                <span class=nx>sans</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Dosis&#34;</span><span class=p>,</span> <span class=p>...</span><span class=nx>defaultTheme</span><span class=p>.</span><span class=nx>fontFamily</span><span class=p>.</span><span class=nx>sans</span><span class=p>]</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>},</span>
    <span class=nx>variants</span><span class=o>:</span> <span class=p>{},</span>
    <span class=nx>plugins</span><span class=o>:</span> <span class=p>[],</span>
<span class=p>}</span>
</code></pre></div></div><p>Note that rails is only checking to see if the <code class=verbatim>application.js</code> file has
changed inside of the <code class=verbatim>app/assets</code> folder, so if you make a change to
the <code class=verbatim>tailwind.config.js</code> file you need to touch <code class=verbatim>application.js</code> to
trigger a rebuild.</p><h2 id=headline-5>References</h2><ol><li><p><a href=https://web-crunch.com/posts/how-to-install-tailwind-css-using-ruby-on-rails>https://web-crunch.com/posts/how-to-install-tailwind-css-using-ruby-on-rails</a></p></li><li><p><a href=https://rubyyagi.com/tailwind-css-on-rails-6-intro/>https://rubyyagi.com/tailwind-css-on-rails-6-intro/</a></p></li><li><p><a href=https://tailwindcss.com/docs/theme>https://tailwindcss.com/docs/theme</a></p></li></ol></article></div><div class="bg-light py-5"><div class=container><h2 class=text-center>Read next</h2><div class=row><div class="col-md-6 text-center"></div><div class="col-md-6 text-center">Previous Post:
<a href=../../../articles/2020/rails_in_docker/>Rails in Docker</a></div></div></div></div><div class="container mt-5"><h2 class=text-center>See also</h2><div class=row><div class="col-md mb-3"><p class="lead mb-0"><a class=text-body href=../../../articles/2020/rails_in_docker/>Rails in Docker</a></p><p class="lead font-italic mb-0">Why install ruby locally?</p><div class="font-weight-light mt-3"><p>In leveraging disposability for exploration we looked at how to build software without having it installed on your local computer. Lets go through how to setup and develop a rails application with this process. docker-compose.yml all the way down We're going to create our app by adding things to a docker-compose.yml file as needed. Lets create the first one, which will contain our rails container as well as a volume for keeping track of all the gems.</p></div><a href=../../../articles/2020/rails_in_docker/ class="btn btn-primary">Read more</a></div></div></div><footer class="footer bg-dark text-light mt-3"><div class=container><h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2></div></footer></body></html>