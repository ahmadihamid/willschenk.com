<!DOCTYPE html>
<html><head>
  <title>OSX Script for Kiosk Mode</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../../css/theme.css"/>
  
  <link rel="stylesheet" href="../../../css/syntax.css"/>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-56296045-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <meta property="og:title" content="OSX Script for Kiosk Mode" />
<meta property="og:description" content="In the office, we run Jenkins on the same machine that we run Benevolent Gaze. During iOS builds, the iOS simulator will take over the screen for the build, and then leave the beautiful screen on the desktop, hiding our smiling faces. We want to return to Safari in this case, but we also want to make sure that if someone is actually in front of the machine it will let them do their thing." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willschenk.com/articles/2015/osx-script-for-kiosk-mode/" /><meta property="article:published_time" content="2015-05-20T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2015-05-20T00:00:00&#43;00:00"/>

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OSX Script for Kiosk Mode"/>
<meta name="twitter:description" content="In the office, we run Jenkins on the same machine that we run Benevolent Gaze. During iOS builds, the iOS simulator will take over the screen for the build, and then leave the beautiful screen on the desktop, hiding our smiling faces. We want to return to Safari in this case, but we also want to make sure that if someone is actually in front of the machine it will let them do their thing."/>
<meta name="twitter:site" content="@wschenk"/>


  <style>
    .article p, .article ul, .article ol, .article table {
      max-width: 45em;
    }

    article.article p:first-child, .article blockquote {
      font-size: 1.25em;
      font-weight: 300;
      max-width: 36em;  
    }
  </style>
</head>
<body><nav class="container my-5">
  <h1 class="pt-5 display-3"><a class="text-dark" href="../../../">Will Schenk</a></h1>
  <p>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../articles/" title="">Articles</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../contact" title="">Contact</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../tags/" title="">Tags</a>
    
    <a href="../../../feed.xml" class="mr-3 h4 text-light"><img src="../../../img/rss.svg" alt="rss" height="20" width="20"/></a>
    
      <a href="https://twitter.com/@wschenk" class="mr-3 h4 text-light"><img src="../../../img/twitter.svg" alt="twitter" height="20" width="20"/></a>
    
    
      <a href="https://instagram.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/instagram.svg" alt="instagram" height="20" width="20"/></a>
    
    
      <a href="https://linkedin.com/in/will-schenk-420266" class="mr-3 h4 text-light"><img src="../../../img/linkedin.svg" alt="linkedin" height="20" width="20"/></a>
    
  </p>
</nav>

<div class="container">
  <h1 class="mt-5">OSX Script for Kiosk Mode</h1>

  
    <h2 class="font-weight-light font-italic mb-3">make your own screen saver</h2>
  

  <p class="text-muted mt-3">
    <a class="text-muted" href="https://willschenk.com/articles/2015/osx-script-for-kiosk-mode/">Published May 20, 2015</a>

    
      <a class="text-muted" href="../../../tags/howto">#howto</a>
    
      <a class="text-muted" href="../../../tags/osx">#osx</a>
    
      <a class="text-muted" href="../../../tags/toys">#toys</a>
    
      <a class="text-muted" href="../../../tags/gaze">#gaze</a>
    
  </p>

  

  <article class="article mt-5">
    <p>In the office, we run <a href="http://jenkins-ci.org">Jenkins</a> on the same machine that we run <a href="http://gaze.happyfuncorp.com">Benevolent Gaze</a>.  During iOS builds, the iOS simulator will take over the screen for the build, and then leave the beautiful screen on the desktop, hiding our smiling faces.  We want to return to Safari in this case, but we also want to make sure that if someone is actually in front of the machine it will let them do their thing.</p>

<p>Here&rsquo;s a little script that check if the user hasn&rsquo;t touched the keyboard or mouse in a while, and if so it will pull Safari to the front.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="k">while</span> <span class="nb">true</span>
<span class="k">do</span>
  <span class="nv">IDLE</span><span class="o">=</span><span class="k">$(</span>ioreg -c IOHIDSystem <span class="p">|</span>awk <span class="s1">&#39;/HIDIdle/ {print int($(NF)/1000000000 + 0.5)}&#39;</span><span class="p">|</span> sort -n <span class="p">|</span>head -1<span class="k">)</span>
  <span class="nb">echo</span> Idle <span class="nv">$IDLE</span> seconds

  <span class="k">if</span> <span class="o">[</span> <span class="nv">$IDLE</span> -gt <span class="m">30</span> <span class="o">]</span>
  <span class="k">then</span>
    cat <span class="s">&lt;&lt;- EOF | osascript
</span><span class="s">      tell application &#34;Safari&#34;
</span><span class="s">        activate
</span><span class="s">      end tell
</span><span class="s">    EOF</span>
  <span class="k">fi</span>
  sleep <span class="m">1</span>
<span class="k">done</span></code></pre></div>
<p>The first thing that this does is to call the <code>ioreg</code> command to pull data from the <code>IOHIDSystem</code>.  This is what OSX uses to track <em>inactivity</em>, which is used to start powering things down to conserve battery life.  The units of this measurement are <em>small</em>, so we divide by <code>1000000000</code> to get them into seconds.  We round that number to the nearest integer by adding <code>0.5</code> and lopping off the right of the decimal place with <code>int</code>.  Then we get the shortest number in the list using <code>sort | head</code>.</p>

<p>This script waits <code>30</code> seconds (<code>if [ $IDLE -gt 30 ]</code>) and then will run <code>osascript</code> to activate Safari.  The here-doc between <code>EOF</code> is AppleScript which will activate <em>Safari</em> and bring it to the front.  Replace that with <em>Google Chrome</em> if that&rsquo;s your preferred browser.</p>

  </article>
</div>


  <div class="bg-light py-5">
    <div class="container">
      <h2 class="text-center">Read next</h2>

      <div class="row">
        <div class="col-md-6 text-center">
          
            Next Post:
            <a href="../../../articles/2015/adding-search-to-a-middleman-blog/">Adding search to a middleman blog</a>
          
        </div>
        <div class="col-md-6 text-center">
          
            Previous Post:
            <a href="../../../articles/2015/slow-data-and-fast-sites/">Slow data and Fast Sites</a>
          
        </div>
      </div>
    </div>
  </div>




<div class="container mt-5">
  <h2 class="text-center">See also</h2>
  <div class="row">
  	
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2014/embedding-3d-models-on-your-page/">Embedding 3d models on your page</a></p>

        
          <p class="lead font-italic mb-0">Github is awesome</p>
        
        <p class="font-weight-light mt-3">Github has an embeddable 3d model viewer that you can use to display a model on your site. The model needs to be hosted in a github repo, and the format is
&lt;script src=&quot;https://embed.github.com/view/3d/&lt;username&gt;/&lt;repo&gt;/&lt;ref&gt;/&lt;path_to_file&gt;&quot;&gt;&lt;/script&gt;
Here&rsquo;s a model of me that we made using the Structure 3d scanner which is a fun device that plugs into your iPhone or iPad.

Pretty fun right?
The next thing you need to do is to get a 3d printer, so you can create action figures for your office.</p>
        <a href="../../../articles/2014/embedding-3d-models-on-your-page/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2014/making-yosemite-faster/">Making Yosemite Faster</a></p>

        
          <p class="lead font-italic mb-0">something is up with WindowServer</p>
        
        <p class="font-weight-light mt-3">Since I&rsquo;ve upgraded to Yosemite my computer has gotten slower and slower. When it first boots up, it is it&rsquo;s old fast self, but after a few hours everything slows down. Remember the days when you needed to restart your computer to keep it working well? I had forgotten, and I wasn&rsquo;t really into remembering it.
I also upgraded to Airmail 2. I get a ton of email and it used it be a lot faster than using Mail.</p>
        <a href="../../../articles/2014/making-yosemite-faster/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2014/how-to-track-your-coworkers/">How to track your coworkers</a></p>

        
          <p class="lead font-italic mb-0">Simple passive network surveillance</p>
        
        <p class="font-weight-light mt-3">How much information do you bleed?
Ever wonder who is else is using your network? Or,who has actually showed up at the office?
Networking primer The simplest thing we can do to make this work is to check to see which devices have registered themselves on the network. As devices come and go, they connect automatically, so we will have a pretty good idea if people are there or not.</p>
        <a href="../../../articles/2014/how-to-track-your-coworkers/" class="btn btn-primary">Read more</a>
      </div>
    
  </div>
</div>


<footer class="footer bg-dark text-light mt-3">
  <div class="container">
    <h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2>
  </div>
</footer>
</body>
</html>
