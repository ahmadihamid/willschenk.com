<!DOCTYPE html>
<html><head>
  <title>Bower with Rails</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../../css/theme.css"/>
  <link rel="stylesheet" href="../../../css/syntax.css"/>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-56296045-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <meta property="og:title" content="Bower with Rails" />
<meta property="og:description" content="Let&rsquo;s look at how we can integrate bower with rails and Sprockets. Bower is one of the two major javascript package managers, the other being the Node Package Manager, or npm. The biggest difference between the two is how the javascript is packaged up. Bower is the more straightforward of the two, and it mainly a way to distribute javascript and keep things up to date.
Install Bower The first step is to install bower." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willschenk.com/articles/2015/bower-with-rails/" />
<meta property="article:published_time" content="2015-07-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-07-25T00:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Bower with Rails"/>
<meta name="twitter:description" content="Let&rsquo;s look at how we can integrate bower with rails and Sprockets. Bower is one of the two major javascript package managers, the other being the Node Package Manager, or npm. The biggest difference between the two is how the javascript is packaged up. Bower is the more straightforward of the two, and it mainly a way to distribute javascript and keep things up to date.
Install Bower The first step is to install bower."/>
<meta name="twitter:site" content="@wschenk"/>


  <style>
    .article p, .article ul, .article ol, .article table {
      max-width: 45em;
    }

    .article pre p {
    max-width: none;
    margin-top: -1.5rem;
    }

    article.article p:first-child, .article blockquote {
      font-size: 1.25em;
      font-weight: 300;
      max-width: 36em;  
    }
  </style>
</head>
<body><nav class="container my-5">
  <h1 class="pt-md-5 display-3"><a class="text-dark" href="../../../">Will Schenk</a></h1>
  <p>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../articles/" title="">Articles</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../contact" title="">Contact</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../tags/" title="">Tags</a>
    
    <a href="../../../feed.xml" class="mr-3 h4 text-light"><img src="../../../img/rss.svg" alt="rss" height="20" width="20"/></a>
    
      <a href="https://twitter.com/@wschenk" class="mr-3 h4 text-light"><img src="../../../img/twitter.svg" alt="twitter" height="20" width="20"/></a>
    
    
      <a href="https://instagram.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/instagram.svg" alt="instagram" height="20" width="20"/></a>
    
    
      <a href="https://github.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/github.svg" alt="github" height="20" width="20"/></a>
    
    
      <a href="https://linkedin.com/in/will-schenk-420266" class="mr-3 h4 text-light"><img src="../../../img/linkedin.svg" alt="linkedin" height="20" width="20"/></a>
    
  </p>
</nav>

<div class="container">
  <h1 class="mt-5">Bower with Rails</h1>

  
    <h2 class="font-weight-light font-italic mb-3">Javascript dependancies and sprockets</h2>
  

  <p class="text-muted mt-3">
    <a class="text-muted" href="https://willschenk.com/articles/2015/bower-with-rails/">Published July 25, 2015</a>

    
      <a class="text-muted" href="../../../tags/javascript">#javascript</a>
    
      <a class="text-muted" href="../../../tags/rails">#rails</a>
    
  </p>

  
  <div class="alert alert-danger">This article was published a while ago and may contain obsolete information!</div>
  

  

  <article class="article mt-5">
    

<p>Let&rsquo;s look at how we can integrate bower with rails and Sprockets. <a href="http://bower.io">Bower</a> is one of the two major javascript package managers, the other being the Node Package Manager, or <a href="https://www.npmjs.com">npm</a>.  The biggest difference between the two is how the javascript is packaged up.  Bower is the more straightforward of the two, and it mainly a way to distribute javascript and keep things up to date.</p>

<h2 id="install-bower">Install Bower</h2>

<p>The first step is to install bower.  Ironically, we need to use npm to do that!  On OSX, the easiest way is to use the <a href="http://brew.sh">Homebrew</a></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ brew install node</code></pre></div>
<p>Then let&rsquo;s install bower in your local command path so you can run it.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ npm install -g bower</code></pre></div>
<h2 id="setup-bower">Setup Bower</h2>

<p>Now let&rsquo;s setup rails to work with bower.  This section assumes that you already have a rails application.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> rails_application</code></pre></div>
<p>Create a <code>.bowerrc</code> file. This is going to tell bower where to install the packages it needs, and we&rsquo;re going to say put it in <code>vendor/assets/bower_components</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;directory&#34;</span><span class="p">:</span> <span class="s2">&#34;vendor/assets/bower_components&#34;</span>
<span class="p">}</span></code></pre></div>
<p>Now run <code>bower init</code> to create a <code>bower.json</code> file.  This file is similar to a <code>Gemfile</code>, in that it lists out the dependancies, and when you run bower again, it will download the specific versions from the intertubes.</p>

<h2 id="tell-rails-where-to-look">Tell rails where to look</h2>

<p>Inside of <code>config/application.rb</code> we&rsquo;re going to tell spockets and additional directory to look for javascript components.</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">paths</span> <span class="o">&lt;&lt;</span> <span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;vendor&#39;</span><span class="p">,</span> <span class="s1">&#39;assets&#39;</span><span class="p">,</span> <span class="s1">&#39;bower_components&#39;</span><span class="p">)</span></code></pre></div>
<h2 id="small-walk-through">Small walk through</h2>

<p>Let&rsquo;s say you want to use Google Maps with Angular.  <a href="http://angular-ui.github.io/angular-google-maps/#!/">angular-google-maps</a> is a package that does a lot of the heavy lifting for you, so lets install that.  We&rsquo;re going to tell bower to keep track of the packages we want inside of our <code>bower.json</code> file by passing in the <code>--save</code> option:</p>

<pre><code>$ bower install --save angular-google-maps
[...]
angular-google-maps#2.1.5 vendor/assets/bower_components/angular-google-maps
├── angular#1.4.3
└── lodash#3.10.0

lodash#3.10.0 vendor/assets/bower_components/lodash

angular#1.4.3 vendor/assets/bower_components/angular
</code></pre>

<p>I&rsquo;ve cleaned up some of the output, but you can see that bower installed angular-google-maps and it&rsquo;s dependancies, angular itself and lodash.  Lets go to our <code>application.js</code> file now to tell Sprockets that we want to use this awesome stuff:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">//= require lodash
</span><span class="c1">//= require angular
</span><span class="c1">//= require angular-google-maps
</span></code></pre></div>
<p>Since we&rsquo;ve added <code>vendor/assets/bower_components</code> in Sprockets load path, it should be able to find all of these files.  Notice that you don&rsquo;t need to know where to get all of the dependancies from, but you do need to make sure that you specify them in your <code>application.js</code> in the right order.  We&rsquo;ll be talking about <code>browersify</code> in future posts that assuages this issue.</p>

<h2 id="to-check-in-or-not-to-check-in">To check in or not to check in</h2>

<p>I prefer to check in the dependancies inside of my source control.  This isn&rsquo;t necessary and in some ways is a waste of disk space, but I think it&rsquo;s easier to figure out what&rsquo;s going on if there&rsquo;s less magic.  This can be confusion if you start to make local tweaks of the javascript, which you should never do.</p>

<p>However, it&rsquo;s not necessary to check things in if you expand your build process a bit.  If you look inside of your <code>bower.json</code> file, you&rsquo;ll see that it specifies the specific version of the bower package that you installed.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;rails_app&#34;</span><span class="p">,</span>
  <span class="s2">&#34;version&#34;</span><span class="o">:</span> <span class="s2">&#34;0.0.0&#34;</span><span class="p">,</span>
  <span class="s2">&#34;authors&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;Will Schenk &lt;wschenk@gmail.com&gt;&#34;</span>
  <span class="p">],</span>
  <span class="s2">&#34;license&#34;</span><span class="o">:</span> <span class="s2">&#34;MIT&#34;</span><span class="p">,</span>
  <span class="s2">&#34;ignore&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;**/.*&#34;</span><span class="p">,</span>
    <span class="s2">&#34;node_modules&#34;</span><span class="p">,</span>
    <span class="s2">&#34;bower_components&#34;</span><span class="p">,</span>
    <span class="s2">&#34;test&#34;</span><span class="p">,</span>
    <span class="s2">&#34;tests&#34;</span>
  <span class="p">],</span>
  <span class="s2">&#34;dependencies&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;angular-google-maps&#34;</span><span class="o">:</span> <span class="s2">&#34;~2.1.5&#34;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This should contain all the information needed so that when you run <code>bower install</code> again, all of the correct versions of the files will be downloaded.  You could make it part of your build process, much like how running <code>bundle install</code> is part of the standard rails build pack.  Bundler looks through <code>Gemfile.lock</code> and installs those specific packages.  The version is always specified inside of <code>bower.json</code> so there doesn&rsquo;t need to be two files.</p>

  </article>

  
</div>


  <div class="bg-light py-5">
    <div class="container">
      <h2 class="text-center">Read next</h2>

      <div class="row">
        <div class="col-md-6 text-center">
          
            Next Post:
            <a href="../../../articles/2015/receiving-posted-json-with-sinatra/">Receiving posted JSON with Sinatra</a>
          
        </div>
        <div class="col-md-6 text-center">
          
            Previous Post:
            <a href="../../../articles/2015/adding-search-to-a-middleman-blog/">Adding search to a middleman blog</a>
          
        </div>
      </div>
    </div>
  </div>




<div class="container mt-5">
  <h2 class="text-center">See also</h2>
  <div class="row">
  	
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2015/setting-up-testing/">Setting up Rails testing with rspec, devise, and the gang</a></p>

        
          <p class="lead font-italic mb-0">so much fun</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>The goal is to get features out fast, and iterate on them quickly. Does anyone care about it? What do they care about? How do we make it better?
As projects get bigger, both in terms of people using the site as well as people working on the site, testing and quality become relatively more important. Adding tests introduces drag, and the theory is that you invest now for payoffs later.</p>
          
        </div>
        <a href="../../../articles/2015/setting-up-testing/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2015/setting-up-devise-with-twitter-and-facebook-and-other-omniauth-schemes-without-email-addresses/">Setting up Devise with Twitter and Facebook and other Omniauth schemes without email addresses</a></p>

        
          <p class="lead font-italic mb-0">Connect connect connect</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>Adding social login to your sites really makes it easier to get users onboard. Devise is great to help get an authentication system up and running, but there are a few tricky things to get right. The first challenge is that you don&rsquo;t always get the user&rsquo;s email address when the first connect. The second challenge is that we want to request the minimum permissions first so that the user is more likely to sign up, and gradually ask more as the time arises.</p>
          
        </div>
        <a href="../../../articles/2015/setting-up-devise-with-twitter-and-facebook-and-other-omniauth-schemes-without-email-addresses/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2014/dateslice-writing-rails-extensions/">Dateslice: Writing rails extensions</a></p>

        
          <p class="lead font-italic mb-0">adding date group_by to ActiveRecord</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>Ruby on Rails is a very modular framework since the merging with Merb in 2008. The opinionated conventions are implemented under using techniques that let you jump in and build your own components, picking and choosing different parts that let you build Rails apps in the same straightforward way you would if using the official modules.
Let&rsquo;s go through the dateslices gem which I wrote to extend active record so that we could better interact with the group by sql command when dealing with dates.</p>
          
        </div>
        <a href="../../../articles/2014/dateslice-writing-rails-extensions/" class="btn btn-primary">Read more</a>
      </div>
    
  </div>
</div>


<footer class="footer bg-dark text-light mt-3">
  <div class="container">
    <h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2>
  </div>
</footer>
</body>
</html>
