<!DOCTYPE html>
<html><head>
    <title>Building a GUI for managing middleman blogs</title>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="../../../css/theme.css"/>
    <link rel="stylesheet" href="../../../css/syntax.css"/>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-56296045-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

      <script async defer data-domain="willschenk.com" src="https://plausible.io/js/plausible.js"></script>
    
    <meta property="og:title" content="Building a GUI for managing middleman blogs" />
<meta property="og:description" content="Can we make static site generators work like a normal site? Lets take a look at how we&rsquo;d start to implement Slow Data and Fast Sites using the example of building an admin UI for a Middleman blog.
TLDR Given a middleman app with middleman-blog and middleman-blog-drafts configured:
 Add middleman-blog-ui in your Gemfile. This document describes how middleman-blog-ui works. Add activate :blog_ui in config.rb Start middleman server Visit http://localhost:4567/admin.  And now you are living in the fabulous world where you can, from your browser:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willschenk.com/articles/2015/building-a-gui-for-managing-middleman-blogs/" />
<meta property="article:published_time" content="2015-07-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-07-30T00:00:00+00:00" />

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building a GUI for managing middleman blogs"/>
<meta name="twitter:description" content="Can we make static site generators work like a normal site? Lets take a look at how we&rsquo;d start to implement Slow Data and Fast Sites using the example of building an admin UI for a Middleman blog.
TLDR Given a middleman app with middleman-blog and middleman-blog-drafts configured:
 Add middleman-blog-ui in your Gemfile. This document describes how middleman-blog-ui works. Add activate :blog_ui in config.rb Start middleman server Visit http://localhost:4567/admin.  And now you are living in the fabulous world where you can, from your browser:"/>
<meta name="twitter:site" content="@wschenk"/>


    <style>
     .article p, .article ul, .article ol, .article table {
         max-width: 45em;
     }

     .article pre p {
         max-width: none;
         margin-top: -1.5rem;
     }

     article.article p:first-child, .article blockquote {
         font-size: 1.25em;
         font-weight: 300;
         max-width: 36em;  
     }

     .half-height-scroll {
         max-height: 32em;
         overflow: scroll;
     }
    </style>
</head>
<body><nav class="container my-5">
  <h1 class="pt-md-5 display-3"><a class="text-dark" href="../../../">Will Schenk</a></h1>
  <p>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../articles/" title="">Articles</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../contact" title="">Contact</a>
    
      <a class="text-dark h4 mr-3 font-weight-light" href="../../../tags/" title="">Tags</a>
    
    <a href="../../../feed.xml" class="mr-3 h4 text-light"><img src="../../../img/rss.svg" alt="rss" height="20" width="20"/></a>
    
      <a href="https://twitter.com/@wschenk" class="mr-3 h4 text-light"><img src="../../../img/twitter.svg" alt="twitter" height="20" width="20"/></a>
    
    
      <a href="https://instagram.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/instagram.svg" alt="instagram" height="20" width="20"/></a>
    
    
      <a href="https://github.com/wschenk" class="mr-3 h4 text-light"><img src="../../../img/github.svg" alt="github" height="20" width="20"/></a>
    
    
      <a href="https://linkedin.com/in/will-schenk-420266" class="mr-3 h4 text-light"><img src="../../../img/linkedin.svg" alt="linkedin" height="20" width="20"/></a>
    
  </p>
</nav>

<div class="container">
  <h1 class="mt-5">Building a GUI for managing middleman blogs</h1>

  
    <h2 class="font-weight-light font-italic mb-3">the site will still be fast, really fast</h2>
  

  <p class="text-muted mt-3">
    <a class="text-muted" href="https://willschenk.com/articles/2015/building-a-gui-for-managing-middleman-blogs/">Published July 30, 2015</a>

    
      <a class="text-muted" href="../../../tags/middleman">#middleman</a>
    
      <a class="text-muted" href="../../../tags/static_sites">#static_sites</a>
    
      <a class="text-muted" href="../../../tags/react">#react</a>
    
  </p>

  
  <div class="alert alert-danger">This article was published a while ago and may contain obsolete information!</div>
  

  

  <article class="article mt-5">
    <p>Can we make static site generators work like a normal site? Lets take a look at how we&rsquo;d start to implement <a href="../../../slow-data-and-fast-sites/">Slow Data and Fast Sites</a> using the example of building an admin UI for a Middleman blog.</p>
<h2 id="tldr">TLDR</h2>
<p>Given a middleman app with <code>middleman-blog</code> and <code>middleman-blog-drafts</code> configured:</p>
<ol>
<li>Add <code>middleman-blog-ui</code> in your <code>Gemfile</code>.  <em>This document describes how <code>middleman-blog-ui</code> works.</em></li>
<li>Add <code>activate :blog_ui</code> in <code>config.rb</code></li>
<li>Start <code>middleman server</code></li>
<li>Visit <a href="http://localhost:4567/admin">http://localhost:4567/admin</a>.</li>
</ol>
<p>And now you are living in the fabulous world where you can, from your browser:</p>
<ul>
<li>Edit existing drafts and posts</li>
<li>Create new drafts</li>
<li>Publish drafts into posts</li>
<li>Run some basic <code>git</code> commands.</li>
<li>Run <code>middleman build</code></li>
<li>Run <code>middleman deploy</code></li>
</ul>
<h2 id="why-do-this">Why do this</h2>
<p>This is explained in more detail in the  <a href="../../../slow-data-and-fast-sites/">Slow Data and Fast Sites</a> post, but basically what we&rsquo;re trying to do it seperate out runtime tooling with development time tooling.  <em>Future work will be around differentiating when components are rendered and from which data source.</em></p>
<p>Static sites have a huge runtime benefit, but actually setting them up and running them can <a href="http://veekaybee.github.io/static-sites-suck/">really suck unless you already know how to do it</a>.  This is a proof of concept of how to add a CMS to a static site so that it&rsquo;s easier to manage.  This doesn&rsquo;t address the &ldquo;pain in the ass to setup&rdquo; part, but it helps with the usability.</p>
<p>Lets walk through what we&rsquo;re doing if we were to implement this in your own app directly.  The gem packages this up with a slightly different directory scheme, but the code below is the same but slightly easier to understand.</p>
<h2 id="the-basic-idea">The basic idea</h2>
<p>We&rsquo;re going to add a static JavaScript application in the <code>source/admin</code> directory which will interact with the local filesystem and middleman install.  This application will consume data from your middleman app on the local system, in the &ldquo;development&rdquo; environment, such as the lists of published and draft articles, and will interact with a API server that will be mounted as part of the middleman preview server.  This will allow the Javascript app to change the filesystem, which will in turn be monitored and rendered by the middleman application.</p>
<p>Examples of the commands that can be triggered are:</p>
<ul>
<li>create new draft</li>
<li>publish draft into article</li>
<li><code>git status</code></li>
<li><code>bundle exec middleman build</code></li>
</ul>
<img src="arch.dot.svg" class="img-fluid">
<p>Let go through each of the components as if we were building them in our app directly.  The <code>gem</code> does a lot of this for you, but it&rsquo;s always nice to see how it works.</p>
<h2 id="static-middleman-site">Static Middleman Site</h2>
<p>We&rsquo;re going to add our files in <code>source/admin</code>, and <code>source/javascript/admin</code> and <code>source/stylesheets/admin.scss</code>.  All of these files will be rendered in development mode, so when the server is running locally and you load up <a href="http://localhost:4567/admin">http://localhost:4567/admin</a> we can use the middleman build process to load up our UI.  This, in turn, will use AJAX to pull in data from the running middleman instance.</p>
<p>Inside of <code>config.rb</code>, we tell middleman about our pages, and we tell the build process to ignore these files as part of the build process since we don&rsquo;t want to release them into production:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">page</span> <span class="s2">&#34;/admin/*html&#34;</span><span class="p">,</span> <span class="ss">layout</span><span class="p">:</span> <span class="s2">&#34;admin/layout&#34;</span>

<span class="c1"># Build-specific configuration</span>
<span class="n">configure</span> <span class="ss">:build</span> <span class="k">do</span>
  <span class="n">ignore</span> <span class="s1">&#39;/admin/*&#39;</span>
  <span class="n">ignore</span> <span class="s1">&#39;/stylesheets/admin/*&#39;</span>
  <span class="n">ignore</span> <span class="s1">&#39;/javascripts/admin/*&#39;</span>
<span class="k">end</span>
</code></pre></div><p>If they were not ignored, then you would be deploying a read-only version of the admin tools, since the production build would include the javascript application but not the API which is needed to make changes.</p>
<p>This will allow us to create files like <code>/source/admin/drafts.json.erb</code>:</p>
<pre><code class="language-erb" data-lang="erb">&lt;%% d = drafts.collect do |d|
    { path: d.path, title: d.title }
  end
%&gt;&lt;%%=
  {drafts: d }.to_json
%&gt;
</code></pre><p>That we can load from our JS app like:</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="s1">&#39;/admin/drafts.json&#39;</span> <span class="p">).</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">}</span> <span class="p">);</span>
</code></pre></div><p>Note that when we do <code>middleman build</code> these files <em>will not</em> be generated, since we&rsquo;ve specified them as <code>ignore</code>.  These files only are in the <code>:development</code> environment.</p>
<h2 id="the-sinatra-app">The Sinatra App</h2>
<p>That&rsquo;s fine for static data, or data that can be exposed using normal middleman ways of doing things, but we&rsquo;ll also want to be able to interact with the filesystem and run commands.  It&rsquo;s also going to be useful to interact with the middleman <em>Sitemap</em> as it understands it, so we can build a simple sinatra app that acts as a bridge.  The current version of the code I&rsquo;m using for this blog can be found <a href="https://github.com/HappyFunCorp/middleman-blog-ui/blob/master/lib/middleman/blog/ui/api_server.rb">on github</a>.</p>
<p>First we need to <code>require</code> and <code>mount</code> our app on <code>config.rb</code>.  This is done like so:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;lib/apiserver.rb&#39;</span>

<span class="n">map</span> <span class="s2">&#34;/api&#34;</span> <span class="k">do</span>
  <span class="n">run</span> <span class="no">ApiServer</span>
<span class="k">end</span>
</code></pre></div><p>The commands we want to support are:</p>
<ul>
<li><code>get /api/post</code> - load a specific post and metadata</li>
<li><code>post /api/post</code> - save a post and update metadata</li>
<li><code>post /api/images</code> - upload an image (for drag and drop) (not implemented)</li>
<li><code>post /api/draft</code> - create a new draft post</li>
<li><code>post /api/publish</code> - change a draft into an article</li>
<li><code>post /api/update</code> - run <code>git pull origin master 2&gt;&amp;1</code></li>
<li><code>post /api/diff</code> - run <code>git diff 2&gt;$1</code></li>
<li><code>post /api/status</code> - run <code>git status 2&gt;&amp;1</code></li>
<li><code>post /api/build</code> - run <code>bundle exec middleman build 2&gt;&amp;1</code></li>
<li><code>post /api/deploy</code> - run <code>bundle exec middleman deploy 2&gt;&amp;1</code></li>
</ul>
<p>To reiterate right now the code is in more of a proof of concept, butso please feel free to make suggestions. Lets take a look at a few of these methods in <code>lib/api_server.rb</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;sinatra/base&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sinatra/json&#39;</span>

<span class="k">class</span> <span class="nc">ApiServer</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
    <span class="s2">&#34;This is the api server&#34;</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="s1">&#39;/post&#39;</span> <span class="k">do</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">load_app</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span> <span class="s2">&#34;Looking up </span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:path</span><span class="o">]</span><span class="si">}</span><span class="s2">&#34;</span>

    <span class="n">file</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">sitemap</span><span class="o">.</span><span class="n">find_resource_by_path</span> <span class="n">params</span><span class="o">[</span><span class="ss">:path</span><span class="o">]</span> <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="ss">:path</span><span class="o">]</span>

    <span class="k">if</span> <span class="o">!</span><span class="n">file</span>
      <span class="n">status</span> <span class="mi">404</span>
      <span class="n">json</span> <span class="ss">error</span><span class="p">:</span> <span class="s2">&#34;Unknown path </span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:path</span><span class="o">]</span><span class="si">}</span><span class="s2">&#34;</span>
    <span class="k">else</span>
      <span class="n">raw</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">read</span> <span class="n">file</span><span class="o">.</span><span class="n">source_file</span>
      <span class="n">body</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span> <span class="sr">/^---\n.*?---\n*/m</span><span class="p">,</span> <span class="s2">&#34;&#34;</span> <span class="p">)</span> <span class="c1"># Remove the preyaml</span>

      <span class="n">json</span> <span class="ss">meta</span><span class="p">:</span> <span class="n">file</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="ss">content</span><span class="p">:</span> <span class="n">body</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>
  <span class="k">def</span> <span class="nf">load_app</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">app</span> <span class="o">=</span> <span class="o">::</span><span class="no">Middleman</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">inst</span> <span class="k">do</span>
      <span class="n">set</span> <span class="ss">:environment</span><span class="p">,</span> <span class="n">opts</span><span class="o">[</span><span class="ss">:environment</span><span class="o">].</span><span class="n">to_sym</span> <span class="k">if</span> <span class="n">opts</span><span class="o">[</span><span class="ss">:environment</span><span class="o">]</span>

      <span class="n">logger</span>
    <span class="k">end</span>

    <span class="n">app</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">logger</span>
    <span class="o">::</span><span class="no">Middleman</span><span class="o">::</span><span class="no">Logger</span><span class="o">.</span><span class="n">singleton</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><h2 id="the-javascript-app">The Javascript App</h2>
<p>I also wanted to see how to build this in <a href="http://facebook.github.io/react/index.html">React</a> and <a href="https://github.com/reflux/refluxjs">Reflux</a> to start exploring how we can start to add build-type rendering into the equation.  While this doesn&rsquo;t do any server side rendering, its still good to explore how a React app actually works.</p>
<p>The main html file simple calls <code>React.render( React.createElement(App, null), document.getElementById('content') );</code> to setup the page.  The <a href="https://github.com/HappyFunCorp/middleman-blog-ui/blob/master/source/javascripts/admin/components/app.js.coffee">App</a> component works off of the <a href="https://github.com/HappyFunCorp/middleman-blog-ui/blob/master/source/javascripts/admin/stores/article.coffee">pathStore</a> component, which keeps track of what page the user is currently editing.  Lets take a quick look at how the <a href="https://github.com/HappyFunCorp/middleman-blog-ui/blob/master/source/javascripts/admin/components/dashboard_draft_list.js.coffee">DashboardDraftList</a> component works:</p>
<div class="highlight"><pre class="chroma"><code class="language-coffeescript" data-lang="coffeescript"><span class="vi">@DashboardDraftList = </span><span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span>
  <span class="nv">mixins: </span><span class="p">[</span><span class="nx">Reflux</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">draftStore</span><span class="p">)],</span>

  <span class="nv">getInitialState: </span><span class="nf">-&gt;</span>
    <span class="nv">drafts: </span><span class="p">[]</span>

  <span class="nv">componentDidMount: </span><span class="nf">-&gt;</span> <span class="nx">updateDraftList</span><span class="p">()</span>

  <span class="nv">render: </span><span class="nf">-&gt;</span>
    <span class="nv">drafts = </span><span class="nx">@state</span><span class="p">.</span><span class="nx">drafts</span><span class="p">.</span><span class="nx">map</span> <span class="nf">(item) -&gt;</span>
      <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">path</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="nx">a</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">viewPath</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">path</span><span class="p">)}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s">&#34;maincontent&#34;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Drafts</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>

      <span class="o">&lt;</span><span class="nx">ul</span> <span class="nx">className</span><span class="o">=</span><span class="s">&#34;nav nav-pills nav-stacked&#34;</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">drafts</span><span class="p">}</span>
      <span class="o">&lt;/</span><span class="nx">ul</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</code></pre></div><p>The first thing that this does is wire itself up to the <code>draftStore</code> store which manages the communication to the server and the state received from the server.  When this changes, <code>draftStore</code> will trigger a state change and all components that have been connected will receive a <code>setState</code> message, which will then call the <code>render</code> method of the component keeping the UI up to date.   As part of the React component life cycle <code>componentDidMount</code>, we call the <code>updateDraftList()</code> action when the component is first loaded on the page.  This is defined in <a href="https://github.com/HappyFunCorp/middleman-blog-ui/blob/master/source/javascripts/admin/stores/drafts.coffee">drafts store</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-coffeescript" data-lang="coffeescript"><span class="vi">@updateDraftList = </span><span class="nx">Reflux</span><span class="p">.</span><span class="nx">createAction</span>
  <span class="nv">asyncResult: </span><span class="kc">true</span>

<span class="vi">@draftStore = </span><span class="nx">Reflux</span><span class="p">.</span><span class="nx">createStore</span>
  <span class="nv">init: </span><span class="nf">-&gt;</span>
    <span class="vi">@drafts = </span><span class="p">[]</span>
    <span class="nx">@listenTo</span><span class="p">(</span> <span class="nx">updateDraftList</span><span class="p">,</span> <span class="nx">@onUpdateDrafts</span> <span class="p">)</span>

  <span class="nv">onUpdateDrafts: </span><span class="nf">-&gt;</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">get</span> <span class="s">&#34;/admin/drafts.json&#34;</span><span class="p">,</span> <span class="nf">(err, response) =&gt;</span>
      <span class="k">if</span> <span class="nx">response</span><span class="p">.</span><span class="nx">ok</span>
        <span class="nx">updateDraftList</span><span class="p">.</span><span class="nx">completed</span><span class="p">(</span> <span class="nx">response</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span>
        <span class="vi">@drafts = </span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span>
        <span class="nx">@trigger</span> <span class="nx">@drafts</span>
      <span class="k">else</span>
        <span class="nx">updateDraftList</span><span class="p">.</span><span class="nx">failed</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
</code></pre></div><p>The first thing we do is to define and export a <code>Reflux</code> action called <code>updateDraftList</code>.  This action is what the <code>componentDidMount</code> function triggeres.  Inside of the <code>draftStore</code> we listen for that action, and when it get it, call <code>onUpdateDrafts</code>.  This uses request.get to load up the json from <code>/admin/drafts.json</code> and then pushes it out to all of the components that have subscribed to it.</p>
<p>The other components are <a href="https://github.com/HappyFunCorp/middleman-blog-ui/tree/master/source/javascripts/admin/components">defined here</a> and the different stores can be <a href="https://github.com/HappyFunCorp/middleman-blog-ui/tree/master/source/javascripts/admin/stores">found here</a>.  This is my first real React app so I&rsquo;m sure there&rsquo;s cleaner/better ways of doing things&hellip;</p>
<h2 id="putting-it-all-together">Putting it all together</h2>
<p>When I was working on this I did it out of the source directory of this blog, but I wanted to package it up into a gem so that other folks could use it.  I pulled the relavent code out from <code>willschenk.com/source</code> into <code>middleman-blog-ui/source</code> and then created a middleman extension to put the various templates in the sitemap, tell sprockets where to find the javascript files, and setup coffee script.</p>
<p>The <a href="https://github.com/HappyFunCorp/middleman-blog-ui/blob/master/lib/middleman/blog/ui/extension.rb">full code</a> is found on github, but to explain how it works:</p>
<ol>
<li>Define <code>SOURCE_DIR</code></li>
<li>Map the sinatra app <code>ApiServer</code> in the extentions <code>initialize</code> method, using <code>app.map</code>.</li>
<li>Register the CoffeeScript processing using <code>::Sprockets.register_preprocessor 'application/javascript', ::Sprockets::CoffeeReact</code></li>
<li>Use <code>after_configuration</code> to register the application templates, by creating <code>Middleman::Sitemap::Resource</code> objects mapping the sitemap urls with the filesytem paths.</li>
<li>Adding each of the javascript and stylesheet files to <code>app.sprockets</code>.</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<p>This is mainly a proof of concept, but I&rsquo;m using it right now to write this post.  The app itself needs</p>
<ol>
<li>A decent UI</li>
<li>Support for other static generators other than middleman</li>
<li>A concept of users</li>
<li>Shared drafts</li>
<li>Better error handling</li>
</ol>
<p>If you are at all interested in this, please let me know!</p>

  </article>

  
</div>


  <div class="bg-light py-5">
    <div class="container">
      <h2 class="text-center">Read next</h2>

      <div class="row">
        <div class="col-md-6 text-center">
          
            Next Post:
            <a href="../../../articles/2015/using-seed-to-explore/">Using seed to explore APIs</a>
          
        </div>
        <div class="col-md-6 text-center">
          
            Previous Post:
            <a href="../../../articles/2015/receiving-posted-json-with-sinatra/">Receiving posted JSON with Sinatra</a>
          
        </div>
      </div>
    </div>
  </div>




<div class="container mt-5">
  <h2 class="text-center">See also</h2>
  <div class="row">
  	
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2015/slow-data-and-fast-sites/">Slow data and Fast Sites</a></p>

        
          <p class="lead font-italic mb-0">building fast, searchable, functional sites that fail gracefully</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>This article walks through the motivations driving and benefits of using a the Seed Architecture for building performant websites using Middleman, React, and a seperate API server such as Parse. The benefits are:
 You get full SEO with a heavy client JavaScript site without having to do crazy things with PhantomJS or meta fragments. Hosting and operations become both cheap and doesn&rsquo;t require a support team. Scaling out the system is mainly a bandwidth problem, and secondarily a API scaling problem for a subset of behavior.</p>
          
        </div>
        <a href="../../../articles/2015/slow-data-and-fast-sites/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2015/adding-search-to-a-middleman-blog/">Adding search to a middleman blog</a></p>

        
          <p class="lead font-italic mb-0">slightly simplier than google</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>We&rsquo;re going to build a simple, niave search for middleman blogs. We&rsquo;re going to build a search index at build time, and then use that index to perform the search itself on the client side.
Building the index When you typed in something in google, it doesn&rsquo;t then go and hit every page on the internet to check to see if there&rsquo;s a match. It doesn&rsquo;t even look at every page that it has squirreled away somewhere in the googleplex.</p>
          
        </div>
        <a href="../../../articles/2015/adding-search-to-a-middleman-blog/" class="btn btn-primary">Read more</a>
      </div>
    
      <div class="col-md mb-3">
        <p class="lead mb-0"><a class="text-body" href="../../../articles/2014/building-middleman-extensions/">Building Middleman Extensions</a></p>

        
          <p class="lead font-italic mb-0">make middleman more awesome</p>
        
        <div class="font-weight-light mt-3">
          
          
            <p>Middleman extensions, like rails plugins, are packaged as gems. There are three main ways to extend middleman. You can add helpers, add middleman commands, or extend the sitemap generation in someway. Lets go through those in detail.
Creating the extension Create a gem using bundle gem _name_
$ bundle gem middleman-graphviz Add middleman-core to your gem dependancies in the .gemspec file:
spec.add_runtime_dependency &#39;middleman-core&#39;, [&#39;&gt;= 3.0.0&#39;] Register your extension into middleman. Our gem will be activated in the sites config.</p>
          
        </div>
        <a href="../../../articles/2014/building-middleman-extensions/" class="btn btn-primary">Read more</a>
      </div>
    
  </div>
</div>


<footer class="footer bg-dark text-light mt-3">
  <div class="container">
    <h2 class="py-5 font-weight-light my-0">Made in Brooklyn, NY.</h2>
  </div>
</footer>
</body>
</html>
