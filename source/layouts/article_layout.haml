!!! 5
%html.no-js
  %head
    %meta{ :charset => 'utf-8' }/
    %meta{ 'http-equiv' => 'X-UA-Compatible', :content => 'IE=edge,chrome=1' }/

    = auto_display_meta_tags
    %meta{ :name => 'viewport', :content => 'width=device-width' }/
    = stylesheet_link_tag 'application', 'webicons', 'socicons', "animate", "googlecode"
    %link{ rel: "stylesheet", href: "//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/default.min.css" }
    = feed_tag :atom, "#{blog.options.prefix.to_s}/feed.xml", title: "Atom Feed"

  %body{ "data-spy" => "scroll", "data-target" => ".sidebar" }
    = partial "layouts/main_header"
    = partial "layouts/article_header"
      
    .content
      .row
        .sidebar
          %ul.nav.toc{ "data-spy" => "affix", "data-offset-top" => "400" }
            %li= link_to current_article.title, "#top"
            - chapters( current_article ).each do |chapter|
              %li= link_to chapter, "##{chapter.downcase.gsub( /\s/, "-" ).gsub( /,/, "")}"

        .article#top
          ~ yield

        .navigation{ "data-spy" => "affix", "data-offset-top" => "400" }
          .next
            - info = tag_nav
            - info[:next].each do |article, tags|
              %p
                Next in
                - tags.each do |tag|
                  = link_to tag, "/tag/#{tag}.html"
              %p.title= link_to article.title, article

          .prev
            - info[:prev].each do |article, tags|
              %p
                Previously in
                - tags.each do |tag|
                  = link_to tag, "/tag/#{tag}.html"
              %p.title= link_to article.title, article


      = partial "layouts/article_footer"

    = partial "layouts/footer"
    = partial "layouts/javascripts"

